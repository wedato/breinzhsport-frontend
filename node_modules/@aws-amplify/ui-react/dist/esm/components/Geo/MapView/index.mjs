import{__rest as e,__awaiter as i}from"tslib";import o,{forwardRef as a,useMemo as r,useState as t,useEffect as l}from"react";import n from"maplibre-gl";import{AmplifyMapLibreRequest as m}from"maplibre-gl-js-amplify";import s from"react-map-gl";import{Amplify as p,Auth as u}from"aws-amplify";import{useDeprecationWarning as d}from"../../../hooks/useDeprecationWarning.mjs";const f=a(((a,f)=>{var c,{mapLib:v,mapStyle:g,style:y}=a,h=e(a,["mapLib","mapStyle","style"]);d({shouldWarn:!0,message:"The `MapView` component has been migrated to `@aws-amplify/ui-react-geo` and will be removed from this package in a future major release. Please install `@aws-amplify/ui-react-geo` and update the import path."});const b=p.configure(),w=r((()=>{var e,i,o,a;return null!==(a=null!==(i=null===(e=b.geo)||void 0===e?void 0:e.amazon_location_service)&&void 0!==i?i:null===(o=b.geo)||void 0===o?void 0:o.AmazonLocationService)&&void 0!==a?a:{}}),[b]),[j,L]=t(),S=r((()=>Object.assign({height:"100vh",position:"relative",width:"100vw"},y)),[y]);return l((()=>{i(void 0,void 0,void 0,(function*(){const e=yield u.currentUserCredentials();if(e){const{region:i}=w,{transformRequest:o}=new m(e,i);L((()=>o))}}))}),[w]),j?o.createElement(s,Object.assign({},h,{mapLib:null!=v?v:n,mapStyle:null!=g?g:null===(c=w.maps)||void 0===c?void 0:c.default,ref:f,style:S,transformRequest:j,fog:h.fog,terrain:h.terrain})):null}));f.displayName="MapView";export{f as MapView};
