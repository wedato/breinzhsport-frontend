import e,{useCallback as i}from"react";import{translate as t,humanFileSize as m}from"@aws-amplify/ui";import{FileState as r}from"../types.mjs";import"../../../../primitives/Alert/Alert.mjs";import"../../../../primitives/Autocomplete/Autocomplete.mjs";import"../../../../primitives/Badge/Badge.mjs";import{Button as l}from"../../../../primitives/Button/Button.mjs";import"../../../../primitives/ButtonGroup/ButtonGroup.mjs";import"../../../../primitives/Card/Card.mjs";import"../../../../primitives/CheckboxField/CheckboxField.mjs";import"../../../../primitives/Collection/Collection.mjs";import"../../../../primitives/Divider/Divider.mjs";import"../../../../primitives/Expander/Expander.mjs";import"../../../../primitives/Expander/ExpanderItem.mjs";import"../../../../primitives/FieldGroupIcon/FieldGroupIcon.mjs";import"../../../../primitives/FieldGroupIcon/FieldGroupIconButton.mjs";import"../../../../primitives/Flex/Flex.mjs";import"../../../../primitives/Grid/Grid.mjs";import"../../../../primitives/Heading/Heading.mjs";import"../../../../primitives/HighlightMatch/HighlightMatch.mjs";import"../../../../primitives/Icon/Icon.mjs";import{Image as s}from"../../../../primitives/Image/Image.mjs";import"../../../../primitives/Link/Link.mjs";import{Loader as o}from"../../../../primitives/Loader/Loader.mjs";import"../../../../primitives/Menu/Menu.mjs";import"../../../../primitives/Menu/MenuButton.mjs";import"../../../../primitives/Menu/MenuItem.mjs";import"../../../../primitives/Pagination/Pagination.mjs";import"../../../../primitives/PasswordField/PasswordField.mjs";import"../../../../primitives/PhoneNumberField/PhoneNumberField.mjs";import"../../../../primitives/Placeholder/Placeholder.mjs";import"../../../../primitives/Radio/Radio.mjs";import"../../../../primitives/RadioGroupField/RadioGroupField.mjs";import"../../../../primitives/Rating/Rating.mjs";import"../../../../primitives/ScrollView/ScrollView.mjs";import"../../../../primitives/SearchField/SearchField.mjs";import"../../../../primitives/SelectField/SelectField.mjs";import"../../../../primitives/SliderField/SliderField.mjs";import"../../../../primitives/StepperField/StepperField.mjs";import"../../../../primitives/SwitchField/SwitchField.mjs";import"../../../../primitives/Table/Table.mjs";import"../../../../primitives/Table/TableBody.mjs";import"../../../../primitives/Table/TableCell.mjs";import"../../../../primitives/Table/TableFoot.mjs";import"../../../../primitives/Table/TableHead.mjs";import"../../../../primitives/Table/TableRow.mjs";import"../../../../primitives/Tabs/Tabs.mjs";import{Text as a}from"../../../../primitives/Text/Text.mjs";import"../../../../primitives/TextAreaField/TextAreaField.mjs";import{TextField as n}from"../../../../primitives/TextField/TextField.mjs";import"../../../../primitives/ToggleButton/ToggleButton.mjs";import"../../../../primitives/ToggleButtonGroup/ToggleButtonGroup.mjs";import{View as p}from"../../../../primitives/View/View.mjs";import{VisuallyHidden as c}from"../../../../primitives/VisuallyHidden/VisuallyHidden.mjs";import{ComponentClassNames as d}from"../../../../primitives/shared/constants.mjs";import"tslib";import"classnames";import{IconClose as u}from"../../../../primitives/Icon/icons/IconClose.mjs";import{IconEdit as v}from"../../../../primitives/Icon/icons/IconEdit.mjs";import{IconFile as j}from"../../../../primitives/Icon/icons/IconFile.mjs";import{UploadMessage as E}from"./UploadMessage.mjs";function F({errorMessage:F,file:g,fileState:f,hasImage:I,name:T,onCancel:S,onCancelEdit:b,onPause:h,onResume:C,onSaveEdit:x,onStartEdit:R,percentage:G,isResumable:N,showImage:k}){const[w,B]=e.useState(T),M=e.useRef(null),U=URL.createObjectURL(g);e.useEffect((()=>{f===r.EDITING&&M.current&&M.current.focus()}),[f]);const{size:z}=g,P=I?e.createElement(s,{alt:g.name,src:U}):e.createElement(j,null),L=!N||G>0,A=f===r.INIT||f===r.ERROR&&F===t("Extension not allowed"),D=i((()=>e.createElement(e.Fragment,null,e.createElement(p,{className:d.FileUploaderFileMain},e.createElement(a,{className:d.FileUploaderFileName},T)),A?e.createElement(l,{onClick:R,size:"small",variation:"link"},e.createElement(c,null,"Edit file name ",g.name),e.createElement(v,{"aria-hidden":!0,fontSize:"medium"})):null,e.createElement(a,{as:"span",className:d.FileUploaderFileSize},m(z,!0)))),[g.name,T,R,A,z]),H=i((()=>{switch(f){case r.EDITING:return e.createElement(e.Fragment,null,e.createElement(l,{size:"small",onClick:()=>{B(T),null==b||b()}},"Cancel"),e.createElement(l,{size:"small",variation:"primary",onClick:()=>{x(w)}},"Save"));case r.RESUME:case r.LOADING:return N?e.createElement(l,{onClick:h,size:"small",variation:"link"},t("pause")):null;case r.PAUSED:return e.createElement(l,{onClick:C,size:"small",variation:"link"},t("Resume"));case r.SUCCESS:return null;default:return e.createElement(l,{size:"small",onClick:S},e.createElement(c,null,"Remove file name ",g.name),e.createElement(u,{"aria-hidden":!0,fontSize:"medium"}))}}),[g.name,f,N,T,S,b,h,C,x,w]);return g?e.createElement(p,{className:d.FileUploaderFile},e.createElement(p,{className:d.FileUploaderFileWrapper},k?e.createElement(p,{className:d.FileUploaderFileImage},P):null,f===r.EDITING?e.createElement(p,{as:"form",flex:"1",onSubmit:()=>{x(w)}},e.createElement(n,{maxLength:1024,ref:M,label:"file name",size:"small",variation:"quiet",labelHidden:!0,onChange:e=>{B(e.target.value)},value:w})):e.createElement(D,null),e.createElement(H,null),f===r.LOADING?e.createElement(o,{className:d.FileUploaderLoader,variation:"linear",percentage:G,isDeterminate:L,isPercentageTextHidden:!0}):null),e.createElement(E,{fileState:f,errorMessage:F,percentage:G})):null}export{F as UploadTracker};
