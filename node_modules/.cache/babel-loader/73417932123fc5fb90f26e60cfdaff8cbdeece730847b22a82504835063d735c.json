{"ast":null,"code":"/**\n * Note: This file was copied from mapbox-gl-draw@1.1.1 because it is no longer accessible in later versions of mapbox-gl-draw which are required for security benefits.\n *\n * If this PR gets merged https://github.com/mapbox/mapbox-gl-draw/pull/1100 or mapbox-gl-draw is forked to maplibre-gl-draw we should investigate removing these files and getting the dependencies from mapbox-gl-draw\n */\n\nconst constrainFeatureMovement = require(\"./constrain_feature_movement\");\nconst Constants = require(\"./constants\");\nmodule.exports = function (features, delta) {\n  const constrainedDelta = constrainFeatureMovement(features.map(feature => feature.toGeoJSON()), delta);\n  features.forEach(feature => {\n    const currentCoordinates = feature.getCoordinates();\n    const moveCoordinate = coord => {\n      const point = {\n        lng: coord[0] + constrainedDelta.lng,\n        lat: coord[1] + constrainedDelta.lat\n      };\n      return [point.lng, point.lat];\n    };\n    const moveRing = ring => ring.map(coord => moveCoordinate(coord));\n    const moveMultiPolygon = multi => multi.map(ring => moveRing(ring));\n    let nextCoordinates;\n    if (feature.type === Constants.geojsonTypes.POINT) {\n      nextCoordinates = moveCoordinate(currentCoordinates);\n    } else if (feature.type === Constants.geojsonTypes.LINE_STRING || feature.type === Constants.geojsonTypes.MULTI_POINT) {\n      nextCoordinates = currentCoordinates.map(moveCoordinate);\n    } else if (feature.type === Constants.geojsonTypes.POLYGON || feature.type === Constants.geojsonTypes.MULTI_LINE_STRING) {\n      nextCoordinates = currentCoordinates.map(moveRing);\n    } else if (feature.type === Constants.geojsonTypes.MULTI_POLYGON) {\n      nextCoordinates = currentCoordinates.map(moveMultiPolygon);\n    }\n    feature.incomingCoords(nextCoordinates);\n  });\n};","map":{"version":3,"names":["constrainFeatureMovement","require","Constants","module","exports","features","delta","constrainedDelta","map","feature","toGeoJSON","forEach","currentCoordinates","getCoordinates","moveCoordinate","coord","point","lng","lat","moveRing","ring","moveMultiPolygon","multi","nextCoordinates","type","geojsonTypes","POINT","LINE_STRING","MULTI_POINT","POLYGON","MULTI_LINE_STRING","MULTI_POLYGON","incomingCoords"],"sources":["C:/Users/jonat/aws_poc/frontend/node_modules/maplibre-gl-draw-circle/lib/utils/move_features.js"],"sourcesContent":["/**\n * Note: This file was copied from mapbox-gl-draw@1.1.1 because it is no longer accessible in later versions of mapbox-gl-draw which are required for security benefits.\n *\n * If this PR gets merged https://github.com/mapbox/mapbox-gl-draw/pull/1100 or mapbox-gl-draw is forked to maplibre-gl-draw we should investigate removing these files and getting the dependencies from mapbox-gl-draw\n */\n\nconst constrainFeatureMovement = require(\"./constrain_feature_movement\");\nconst Constants = require(\"./constants\");\n\nmodule.exports = function (features, delta) {\n  const constrainedDelta = constrainFeatureMovement(\n    features.map((feature) => feature.toGeoJSON()),\n    delta\n  );\n\n  features.forEach((feature) => {\n    const currentCoordinates = feature.getCoordinates();\n\n    const moveCoordinate = (coord) => {\n      const point = {\n        lng: coord[0] + constrainedDelta.lng,\n        lat: coord[1] + constrainedDelta.lat,\n      };\n      return [point.lng, point.lat];\n    };\n    const moveRing = (ring) => ring.map((coord) => moveCoordinate(coord));\n    const moveMultiPolygon = (multi) => multi.map((ring) => moveRing(ring));\n\n    let nextCoordinates;\n    if (feature.type === Constants.geojsonTypes.POINT) {\n      nextCoordinates = moveCoordinate(currentCoordinates);\n    } else if (feature.type === Constants.geojsonTypes.LINE_STRING || feature.type === Constants.geojsonTypes.MULTI_POINT) {\n      nextCoordinates = currentCoordinates.map(moveCoordinate);\n    } else if (feature.type === Constants.geojsonTypes.POLYGON || feature.type === Constants.geojsonTypes.MULTI_LINE_STRING) {\n      nextCoordinates = currentCoordinates.map(moveRing);\n    } else if (feature.type === Constants.geojsonTypes.MULTI_POLYGON) {\n      nextCoordinates = currentCoordinates.map(moveMultiPolygon);\n    }\n\n    feature.incomingCoords(nextCoordinates);\n  });\n};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;;AAEA,MAAMA,wBAAwB,GAAGC,OAAO,CAAC,8BAA8B,CAAC;AACxE,MAAMC,SAAS,GAAGD,OAAO,CAAC,aAAa,CAAC;AAExCE,MAAM,CAACC,OAAO,GAAG,UAAUC,QAAQ,EAAEC,KAAK,EAAE;EAC1C,MAAMC,gBAAgB,GAAGP,wBAAwB,CAC/CK,QAAQ,CAACG,GAAG,CAAEC,OAAO,IAAKA,OAAO,CAACC,SAAS,CAAC,CAAC,CAAC,EAC9CJ,KACF,CAAC;EAEDD,QAAQ,CAACM,OAAO,CAAEF,OAAO,IAAK;IAC5B,MAAMG,kBAAkB,GAAGH,OAAO,CAACI,cAAc,CAAC,CAAC;IAEnD,MAAMC,cAAc,GAAIC,KAAK,IAAK;MAChC,MAAMC,KAAK,GAAG;QACZC,GAAG,EAAEF,KAAK,CAAC,CAAC,CAAC,GAAGR,gBAAgB,CAACU,GAAG;QACpCC,GAAG,EAAEH,KAAK,CAAC,CAAC,CAAC,GAAGR,gBAAgB,CAACW;MACnC,CAAC;MACD,OAAO,CAACF,KAAK,CAACC,GAAG,EAAED,KAAK,CAACE,GAAG,CAAC;IAC/B,CAAC;IACD,MAAMC,QAAQ,GAAIC,IAAI,IAAKA,IAAI,CAACZ,GAAG,CAAEO,KAAK,IAAKD,cAAc,CAACC,KAAK,CAAC,CAAC;IACrE,MAAMM,gBAAgB,GAAIC,KAAK,IAAKA,KAAK,CAACd,GAAG,CAAEY,IAAI,IAAKD,QAAQ,CAACC,IAAI,CAAC,CAAC;IAEvE,IAAIG,eAAe;IACnB,IAAId,OAAO,CAACe,IAAI,KAAKtB,SAAS,CAACuB,YAAY,CAACC,KAAK,EAAE;MACjDH,eAAe,GAAGT,cAAc,CAACF,kBAAkB,CAAC;IACtD,CAAC,MAAM,IAAIH,OAAO,CAACe,IAAI,KAAKtB,SAAS,CAACuB,YAAY,CAACE,WAAW,IAAIlB,OAAO,CAACe,IAAI,KAAKtB,SAAS,CAACuB,YAAY,CAACG,WAAW,EAAE;MACrHL,eAAe,GAAGX,kBAAkB,CAACJ,GAAG,CAACM,cAAc,CAAC;IAC1D,CAAC,MAAM,IAAIL,OAAO,CAACe,IAAI,KAAKtB,SAAS,CAACuB,YAAY,CAACI,OAAO,IAAIpB,OAAO,CAACe,IAAI,KAAKtB,SAAS,CAACuB,YAAY,CAACK,iBAAiB,EAAE;MACvHP,eAAe,GAAGX,kBAAkB,CAACJ,GAAG,CAACW,QAAQ,CAAC;IACpD,CAAC,MAAM,IAAIV,OAAO,CAACe,IAAI,KAAKtB,SAAS,CAACuB,YAAY,CAACM,aAAa,EAAE;MAChER,eAAe,GAAGX,kBAAkB,CAACJ,GAAG,CAACa,gBAAgB,CAAC;IAC5D;IAEAZ,OAAO,CAACuB,cAAc,CAACT,eAAe,CAAC;EACzC,CAAC,CAAC;AACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}