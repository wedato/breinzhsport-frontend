{"ast":null,"code":"var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\nimport { Geo } from \"@aws-amplify/geo\";\nimport MaplibreGeocoder from \"@maplibre/maplibre-gl-geocoder\";\nimport maplibregl from \"maplibre-gl\";\nimport { createDefaultIcon } from \"./createDefaultIcon\";\nexport const AmplifyGeocoderAPI = {\n  forwardGeocode: config => __awaiter(void 0, void 0, void 0, function* () {\n    const features = [];\n    try {\n      const data = yield Geo.searchByText(config.query, {\n        biasPosition: config.bbox ? undefined : config.proximity,\n        searchAreaConstraints: config.bbox,\n        countries: config.countries,\n        maxResults: config.limit\n      });\n      if (data) {\n        data.forEach(result => {\n          const {\n              geometry\n            } = result,\n            otherResults = __rest(result, [\"geometry\"]);\n          features.push({\n            type: \"Feature\",\n            geometry: {\n              type: \"Point\",\n              coordinates: geometry.point\n            },\n            properties: Object.assign({}, otherResults),\n            place_name: otherResults.label,\n            text: otherResults.label,\n            center: geometry.point\n          });\n        });\n      }\n    } catch (e) {\n      console.error(`Failed to forwardGeocode with error: ${e}`);\n    }\n    return {\n      features\n    };\n  }),\n  reverseGeocode: config => __awaiter(void 0, void 0, void 0, function* () {\n    const features = [];\n    try {\n      const data = yield Geo.searchByCoordinates(config.query, {\n        maxResults: config.limit\n      });\n      if (data && data.geometry) {\n        const {\n            geometry\n          } = data,\n          otherResults = __rest(data, [\"geometry\"]);\n        features.push({\n          type: \"Feature\",\n          geometry: {\n            type: \"Point\",\n            coordinates: geometry.point\n          },\n          properties: Object.assign({}, otherResults),\n          place_name: otherResults.label,\n          text: otherResults.label,\n          center: geometry.point\n        });\n      }\n    } catch (e) {\n      console.error(`Failed to reverseGeocode with error: ${e}`);\n    }\n    return {\n      features\n    };\n  }),\n  getSuggestions: config => __awaiter(void 0, void 0, void 0, function* () {\n    const suggestions = [];\n    try {\n      const response = yield Geo.searchForSuggestions(config.query, {\n        biasPosition: config.proximity,\n        searchAreaConstraints: config.bbox,\n        countries: config.countries,\n        maxResults: config.limit\n      });\n      suggestions.push(...response);\n    } catch (e) {\n      console.error(`Failed to get suggestions with error: ${e}`);\n    }\n    return {\n      suggestions\n    };\n  }),\n  searchByPlaceId: config => __awaiter(void 0, void 0, void 0, function* () {\n    let feature = undefined;\n    try {\n      const place = yield Geo.searchByPlaceId(config.query);\n      if (place) {\n        const {\n            geometry\n          } = place,\n          otherResults = __rest(place, [\"geometry\"]);\n        feature = {\n          type: \"Feature\",\n          geometry: {\n            type: \"Point\",\n            coordinates: geometry.point\n          },\n          properties: Object.assign({}, otherResults),\n          place_name: otherResults.label,\n          text: otherResults.label,\n          center: geometry.point\n        };\n      }\n      ;\n    } catch (e) {\n      console.error(`Failed to get place with error: ${e}`);\n    }\n    return {\n      place: feature\n    };\n  })\n};\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function createAmplifyGeocoder(options) {\n  return new MaplibreGeocoder(AmplifyGeocoderAPI, Object.assign({\n    maplibregl: maplibregl,\n    showResultMarkers: {\n      element: createDefaultIcon()\n    },\n    marker: {\n      element: createDefaultIcon()\n    },\n    // autocomplete temporarily disabled by default until CLI is updated\n    showResultsWhileTyping: options === null || options === void 0 ? void 0 : options.autocomplete\n  }, options));\n}","map":{"version":3,"names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__rest","s","t","p","Object","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","length","propertyIsEnumerable","Geo","MaplibreGeocoder","maplibregl","createDefaultIcon","AmplifyGeocoderAPI","forwardGeocode","config","features","data","searchByText","query","biasPosition","bbox","undefined","proximity","searchAreaConstraints","countries","maxResults","limit","forEach","geometry","otherResults","push","type","coordinates","point","properties","assign","place_name","label","text","center","console","error","reverseGeocode","searchByCoordinates","getSuggestions","suggestions","response","searchForSuggestions","searchByPlaceId","feature","place","createAmplifyGeocoder","options","showResultMarkers","element","marker","showResultsWhileTyping","autocomplete"],"sources":["C:/Users/jonat/aws_poc/frontend/node_modules/maplibre-gl-js-amplify/lib/esm/AmplifyMapLibreGeocoder.js"],"sourcesContent":["var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\n/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\nimport { Geo } from \"@aws-amplify/geo\";\nimport MaplibreGeocoder from \"@maplibre/maplibre-gl-geocoder\";\nimport maplibregl from \"maplibre-gl\";\nimport { createDefaultIcon } from \"./createDefaultIcon\";\nexport const AmplifyGeocoderAPI = {\n    forwardGeocode: (config) => __awaiter(void 0, void 0, void 0, function* () {\n        const features = [];\n        try {\n            const data = yield Geo.searchByText(config.query, {\n                biasPosition: config.bbox ? undefined : config.proximity,\n                searchAreaConstraints: config.bbox,\n                countries: config.countries,\n                maxResults: config.limit,\n            });\n            if (data) {\n                data.forEach((result) => {\n                    const { geometry } = result, otherResults = __rest(result, [\"geometry\"]);\n                    features.push({\n                        type: \"Feature\",\n                        geometry: { type: \"Point\", coordinates: geometry.point },\n                        properties: Object.assign({}, otherResults),\n                        place_name: otherResults.label,\n                        text: otherResults.label,\n                        center: geometry.point,\n                    });\n                });\n            }\n        }\n        catch (e) {\n            console.error(`Failed to forwardGeocode with error: ${e}`);\n        }\n        return { features };\n    }),\n    reverseGeocode: (config) => __awaiter(void 0, void 0, void 0, function* () {\n        const features = [];\n        try {\n            const data = yield Geo.searchByCoordinates(config.query, {\n                maxResults: config.limit,\n            });\n            if (data && data.geometry) {\n                const { geometry } = data, otherResults = __rest(data, [\"geometry\"]);\n                features.push({\n                    type: \"Feature\",\n                    geometry: { type: \"Point\", coordinates: geometry.point },\n                    properties: Object.assign({}, otherResults),\n                    place_name: otherResults.label,\n                    text: otherResults.label,\n                    center: geometry.point,\n                });\n            }\n        }\n        catch (e) {\n            console.error(`Failed to reverseGeocode with error: ${e}`);\n        }\n        return { features };\n    }),\n    getSuggestions: (config) => __awaiter(void 0, void 0, void 0, function* () {\n        const suggestions = [];\n        try {\n            const response = yield Geo.searchForSuggestions(config.query, {\n                biasPosition: config.proximity,\n                searchAreaConstraints: config.bbox,\n                countries: config.countries,\n                maxResults: config.limit,\n            });\n            suggestions.push(...response);\n        }\n        catch (e) {\n            console.error(`Failed to get suggestions with error: ${e}`);\n        }\n        return { suggestions };\n    }),\n    searchByPlaceId: (config) => __awaiter(void 0, void 0, void 0, function* () {\n        let feature = undefined;\n        try {\n            const place = yield Geo.searchByPlaceId(config.query);\n            if (place) {\n                const { geometry } = place, otherResults = __rest(place, [\"geometry\"]);\n                feature = {\n                    type: \"Feature\",\n                    geometry: { type: \"Point\", coordinates: geometry.point },\n                    properties: Object.assign({}, otherResults),\n                    place_name: otherResults.label,\n                    text: otherResults.label,\n                    center: geometry.point,\n                };\n            }\n            ;\n        }\n        catch (e) {\n            console.error(`Failed to get place with error: ${e}`);\n        }\n        return { place: feature };\n    })\n};\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function createAmplifyGeocoder(options) {\n    return new MaplibreGeocoder(AmplifyGeocoderAPI, Object.assign({ maplibregl: maplibregl, showResultMarkers: { element: createDefaultIcon() }, marker: { element: createDefaultIcon() }, \n        // autocomplete temporarily disabled by default until CLI is updated\n        showResultsWhileTyping: options === null || options === void 0 ? void 0 : options.autocomplete }, options));\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}