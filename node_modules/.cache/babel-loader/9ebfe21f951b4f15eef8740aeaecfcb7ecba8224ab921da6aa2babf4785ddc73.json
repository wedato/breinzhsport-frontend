{"ast":null,"code":"import setupModeHandler from './lib/mode_handler.js';\nimport getFeaturesAndSetCursor from './lib/get_features_and_set_cursor.js';\nimport featuresAt from './lib/features_at.js';\nimport isClick from './lib/is_click.js';\nimport isTap from './lib/is_tap.js';\nimport * as Constants from './constants.js';\nimport objectToMode from './modes/object_to_mode.js';\nexport default function (ctx) {\n  const modes = Object.keys(ctx.options.modes).reduce((m, k) => {\n    m[k] = objectToMode(ctx.options.modes[k]);\n    return m;\n  }, {});\n  let mouseDownInfo = {};\n  let touchStartInfo = {};\n  const events = {};\n  let currentModeName = null;\n  let currentMode = null;\n  events.drag = function (event, isDrag) {\n    if (isDrag({\n      point: event.point,\n      time: new Date().getTime()\n    })) {\n      ctx.ui.queueMapClasses({\n        mouse: Constants.cursors.DRAG\n      });\n      currentMode.drag(event);\n    } else {\n      event.originalEvent.stopPropagation();\n    }\n  };\n  events.mousedrag = function (event) {\n    events.drag(event, endInfo => !isClick(mouseDownInfo, endInfo));\n  };\n  events.touchdrag = function (event) {\n    events.drag(event, endInfo => !isTap(touchStartInfo, endInfo));\n  };\n  events.mousemove = function (event) {\n    const button = event.originalEvent.buttons !== undefined ? event.originalEvent.buttons : event.originalEvent.which;\n    if (button === 1) {\n      return events.mousedrag(event);\n    }\n    const target = getFeaturesAndSetCursor(event, ctx);\n    event.featureTarget = target;\n    currentMode.mousemove(event);\n  };\n  events.mousedown = function (event) {\n    mouseDownInfo = {\n      time: new Date().getTime(),\n      point: event.point\n    };\n    const target = getFeaturesAndSetCursor(event, ctx);\n    event.featureTarget = target;\n    currentMode.mousedown(event);\n  };\n  events.mouseup = function (event) {\n    const target = getFeaturesAndSetCursor(event, ctx);\n    event.featureTarget = target;\n    if (isClick(mouseDownInfo, {\n      point: event.point,\n      time: new Date().getTime()\n    })) {\n      currentMode.click(event);\n    } else {\n      currentMode.mouseup(event);\n    }\n  };\n  events.mouseout = function (event) {\n    currentMode.mouseout(event);\n  };\n  events.touchstart = function (event) {\n    if (!ctx.options.touchEnabled) {\n      return;\n    }\n    touchStartInfo = {\n      time: new Date().getTime(),\n      point: event.point\n    };\n    const target = featuresAt.touch(event, null, ctx)[0];\n    event.featureTarget = target;\n    currentMode.touchstart(event);\n  };\n  events.touchmove = function (event) {\n    if (!ctx.options.touchEnabled) {\n      return;\n    }\n    currentMode.touchmove(event);\n    return events.touchdrag(event);\n  };\n  events.touchend = function (event) {\n    // Prevent emulated mouse events because we will fully handle the touch here.\n    // This does not stop the touch events from propogating to mapbox though.\n    event.originalEvent.preventDefault();\n    if (!ctx.options.touchEnabled) {\n      return;\n    }\n    const target = featuresAt.touch(event, null, ctx)[0];\n    event.featureTarget = target;\n    if (isTap(touchStartInfo, {\n      time: new Date().getTime(),\n      point: event.point\n    })) {\n      currentMode.tap(event);\n    } else {\n      currentMode.touchend(event);\n    }\n  };\n\n  // 8 - Backspace\n  // 46 - Delete\n  const isKeyModeValid = code => !(code === 8 || code === 46 || code >= 48 && code <= 57);\n  events.keydown = function (event) {\n    const isMapElement = (event.srcElement || event.target).classList.contains(Constants.classes.CANVAS);\n    if (!isMapElement) return; // we only handle events on the map\n\n    if ((event.keyCode === 8 || event.keyCode === 46) && ctx.options.controls.trash) {\n      event.preventDefault();\n      currentMode.trash();\n    } else if (isKeyModeValid(event.keyCode)) {\n      currentMode.keydown(event);\n    } else if (event.keyCode === 49 && ctx.options.controls.point) {\n      changeMode(Constants.modes.DRAW_POINT);\n    } else if (event.keyCode === 50 && ctx.options.controls.line_string) {\n      changeMode(Constants.modes.DRAW_LINE_STRING);\n    } else if (event.keyCode === 51 && ctx.options.controls.polygon) {\n      changeMode(Constants.modes.DRAW_POLYGON);\n    }\n  };\n  events.keyup = function (event) {\n    if (isKeyModeValid(event.keyCode)) {\n      currentMode.keyup(event);\n    }\n  };\n  events.zoomend = function () {\n    ctx.store.changeZoom();\n  };\n  events.data = function (event) {\n    if (event.dataType === 'style') {\n      const {\n        setup,\n        map,\n        options,\n        store\n      } = ctx;\n      const hasLayers = options.styles.some(style => map.getLayer(style.id));\n      if (!hasLayers) {\n        setup.addLayers();\n        store.setDirty();\n        store.render();\n      }\n    }\n  };\n  function changeMode(modename, nextModeOptions, eventOptions = {}) {\n    currentMode.stop();\n    const modebuilder = modes[modename];\n    if (modebuilder === undefined) {\n      throw new Error(`${modename} is not valid`);\n    }\n    currentModeName = modename;\n    const mode = modebuilder(ctx, nextModeOptions);\n    currentMode = setupModeHandler(mode, ctx);\n    if (!eventOptions.silent) {\n      ctx.map.fire(Constants.events.MODE_CHANGE, {\n        mode: modename\n      });\n    }\n    ctx.store.setDirty();\n    ctx.store.render();\n  }\n  const actionState = {\n    trash: false,\n    combineFeatures: false,\n    uncombineFeatures: false\n  };\n  function actionable(actions) {\n    let changed = false;\n    Object.keys(actions).forEach(action => {\n      if (actionState[action] === undefined) throw new Error('Invalid action type');\n      if (actionState[action] !== actions[action]) changed = true;\n      actionState[action] = actions[action];\n    });\n    if (changed) ctx.map.fire(Constants.events.ACTIONABLE, {\n      actions: actionState\n    });\n  }\n  const api = {\n    start() {\n      currentModeName = ctx.options.defaultMode;\n      currentMode = setupModeHandler(modes[currentModeName](ctx), ctx);\n    },\n    changeMode,\n    actionable,\n    currentModeName() {\n      return currentModeName;\n    },\n    currentModeRender(geojson, push) {\n      return currentMode.render(geojson, push);\n    },\n    fire(eventName, eventData) {\n      if (!ctx.map) return;\n      ctx.map.fire(eventName, eventData);\n    },\n    addEventListeners() {\n      ctx.map.on('mousemove', events.mousemove);\n      ctx.map.on('mousedown', events.mousedown);\n      ctx.map.on('mouseup', events.mouseup);\n      ctx.map.on('data', events.data);\n      ctx.map.on('touchmove', events.touchmove);\n      ctx.map.on('touchstart', events.touchstart);\n      ctx.map.on('touchend', events.touchend);\n      ctx.container.addEventListener('mouseout', events.mouseout);\n      if (ctx.options.keybindings) {\n        ctx.container.addEventListener('keydown', events.keydown);\n        ctx.container.addEventListener('keyup', events.keyup);\n      }\n    },\n    removeEventListeners() {\n      ctx.map.off('mousemove', events.mousemove);\n      ctx.map.off('mousedown', events.mousedown);\n      ctx.map.off('mouseup', events.mouseup);\n      ctx.map.off('data', events.data);\n      ctx.map.off('touchmove', events.touchmove);\n      ctx.map.off('touchstart', events.touchstart);\n      ctx.map.off('touchend', events.touchend);\n      ctx.container.removeEventListener('mouseout', events.mouseout);\n      if (ctx.options.keybindings) {\n        ctx.container.removeEventListener('keydown', events.keydown);\n        ctx.container.removeEventListener('keyup', events.keyup);\n      }\n    },\n    trash(options) {\n      currentMode.trash(options);\n    },\n    combineFeatures() {\n      currentMode.combineFeatures();\n    },\n    uncombineFeatures() {\n      currentMode.uncombineFeatures();\n    },\n    getMode() {\n      return currentModeName;\n    }\n  };\n  return api;\n}","map":{"version":3,"names":["setupModeHandler","getFeaturesAndSetCursor","featuresAt","isClick","isTap","Constants","objectToMode","ctx","modes","Object","keys","options","reduce","m","k","mouseDownInfo","touchStartInfo","events","currentModeName","currentMode","drag","event","isDrag","point","time","Date","getTime","ui","queueMapClasses","mouse","cursors","DRAG","originalEvent","stopPropagation","mousedrag","endInfo","touchdrag","mousemove","button","buttons","undefined","which","target","featureTarget","mousedown","mouseup","click","mouseout","touchstart","touchEnabled","touch","touchmove","touchend","preventDefault","tap","isKeyModeValid","code","keydown","isMapElement","srcElement","classList","contains","classes","CANVAS","keyCode","controls","trash","changeMode","DRAW_POINT","line_string","DRAW_LINE_STRING","polygon","DRAW_POLYGON","keyup","zoomend","store","changeZoom","data","dataType","setup","map","hasLayers","styles","some","style","getLayer","id","addLayers","setDirty","render","modename","nextModeOptions","eventOptions","stop","modebuilder","Error","mode","silent","fire","MODE_CHANGE","actionState","combineFeatures","uncombineFeatures","actionable","actions","changed","forEach","action","ACTIONABLE","api","start","defaultMode","currentModeRender","geojson","push","eventName","eventData","addEventListeners","on","container","addEventListener","keybindings","removeEventListeners","off","removeEventListener","getMode"],"sources":["C:/Users/jonat/aws_poc/frontend/node_modules/@mapbox/mapbox-gl-draw/src/events.js"],"sourcesContent":["import setupModeHandler from './lib/mode_handler.js';\nimport getFeaturesAndSetCursor from './lib/get_features_and_set_cursor.js';\nimport featuresAt from './lib/features_at.js';\nimport isClick from './lib/is_click.js';\nimport isTap from './lib/is_tap.js';\nimport * as Constants from './constants.js';\nimport objectToMode from './modes/object_to_mode.js';\n\nexport default function(ctx) {\n\n  const modes = Object.keys(ctx.options.modes).reduce((m, k) => {\n    m[k] = objectToMode(ctx.options.modes[k]);\n    return m;\n  }, {});\n\n  let mouseDownInfo = {};\n  let touchStartInfo = {};\n  const events = {};\n  let currentModeName = null;\n  let currentMode = null;\n\n  events.drag = function(event, isDrag) {\n    if (isDrag({\n      point: event.point,\n      time: new Date().getTime()\n    })) {\n      ctx.ui.queueMapClasses({ mouse: Constants.cursors.DRAG });\n      currentMode.drag(event);\n    } else {\n      event.originalEvent.stopPropagation();\n    }\n  };\n\n  events.mousedrag = function(event) {\n    events.drag(event, endInfo => !isClick(mouseDownInfo, endInfo));\n  };\n\n  events.touchdrag = function(event) {\n    events.drag(event, endInfo => !isTap(touchStartInfo, endInfo));\n  };\n\n  events.mousemove = function(event) {\n    const button = event.originalEvent.buttons !== undefined ? event.originalEvent.buttons : event.originalEvent.which;\n    if (button === 1) {\n      return events.mousedrag(event);\n    }\n    const target = getFeaturesAndSetCursor(event, ctx);\n    event.featureTarget = target;\n    currentMode.mousemove(event);\n  };\n\n  events.mousedown = function(event) {\n    mouseDownInfo = {\n      time: new Date().getTime(),\n      point: event.point\n    };\n    const target = getFeaturesAndSetCursor(event, ctx);\n    event.featureTarget = target;\n    currentMode.mousedown(event);\n  };\n\n  events.mouseup = function(event) {\n    const target = getFeaturesAndSetCursor(event, ctx);\n    event.featureTarget = target;\n\n    if (isClick(mouseDownInfo, {\n      point: event.point,\n      time: new Date().getTime()\n    })) {\n      currentMode.click(event);\n    } else {\n      currentMode.mouseup(event);\n    }\n  };\n\n  events.mouseout = function(event) {\n    currentMode.mouseout(event);\n  };\n\n  events.touchstart = function(event) {\n    if (!ctx.options.touchEnabled) {\n      return;\n    }\n\n    touchStartInfo = {\n      time: new Date().getTime(),\n      point: event.point\n    };\n    const target = featuresAt.touch(event, null, ctx)[0];\n    event.featureTarget = target;\n    currentMode.touchstart(event);\n  };\n\n  events.touchmove = function(event) {\n    if (!ctx.options.touchEnabled) {\n      return;\n    }\n\n    currentMode.touchmove(event);\n    return events.touchdrag(event);\n  };\n\n  events.touchend = function(event) {\n    // Prevent emulated mouse events because we will fully handle the touch here.\n    // This does not stop the touch events from propogating to mapbox though.\n    event.originalEvent.preventDefault();\n    if (!ctx.options.touchEnabled) {\n      return;\n    }\n\n    const target = featuresAt.touch(event, null, ctx)[0];\n    event.featureTarget = target;\n    if (isTap(touchStartInfo, {\n      time: new Date().getTime(),\n      point: event.point\n    })) {\n      currentMode.tap(event);\n    } else {\n      currentMode.touchend(event);\n    }\n  };\n\n  // 8 - Backspace\n  // 46 - Delete\n  const isKeyModeValid = code => !(code === 8 || code === 46 || (code >= 48 && code <= 57));\n\n  events.keydown = function(event) {\n    const isMapElement = (event.srcElement || event.target).classList.contains(Constants.classes.CANVAS);\n    if (!isMapElement) return; // we only handle events on the map\n\n    if ((event.keyCode === 8 || event.keyCode === 46) && ctx.options.controls.trash) {\n      event.preventDefault();\n      currentMode.trash();\n    } else if (isKeyModeValid(event.keyCode)) {\n      currentMode.keydown(event);\n    } else if (event.keyCode === 49 && ctx.options.controls.point) {\n      changeMode(Constants.modes.DRAW_POINT);\n    } else if (event.keyCode === 50 && ctx.options.controls.line_string) {\n      changeMode(Constants.modes.DRAW_LINE_STRING);\n    } else if (event.keyCode === 51 && ctx.options.controls.polygon) {\n      changeMode(Constants.modes.DRAW_POLYGON);\n    }\n  };\n\n  events.keyup = function(event) {\n    if (isKeyModeValid(event.keyCode)) {\n      currentMode.keyup(event);\n    }\n  };\n\n  events.zoomend = function() {\n    ctx.store.changeZoom();\n  };\n\n  events.data = function(event) {\n    if (event.dataType === 'style') {\n      const { setup, map, options, store } = ctx;\n      const hasLayers = options.styles.some(style => map.getLayer(style.id));\n      if (!hasLayers) {\n        setup.addLayers();\n        store.setDirty();\n        store.render();\n      }\n    }\n  };\n\n  function changeMode(modename, nextModeOptions, eventOptions = {}) {\n    currentMode.stop();\n\n    const modebuilder = modes[modename];\n    if (modebuilder === undefined) {\n      throw new Error(`${modename} is not valid`);\n    }\n    currentModeName = modename;\n    const mode = modebuilder(ctx, nextModeOptions);\n    currentMode = setupModeHandler(mode, ctx);\n\n    if (!eventOptions.silent) {\n      ctx.map.fire(Constants.events.MODE_CHANGE, { mode: modename});\n    }\n\n    ctx.store.setDirty();\n    ctx.store.render();\n  }\n\n  const actionState = {\n    trash: false,\n    combineFeatures: false,\n    uncombineFeatures: false\n  };\n\n  function actionable(actions) {\n    let changed = false;\n    Object.keys(actions).forEach((action) => {\n      if (actionState[action] === undefined) throw new Error('Invalid action type');\n      if (actionState[action] !== actions[action]) changed = true;\n      actionState[action] = actions[action];\n    });\n    if (changed) ctx.map.fire(Constants.events.ACTIONABLE, { actions: actionState });\n  }\n\n  const api = {\n    start() {\n      currentModeName = ctx.options.defaultMode;\n      currentMode = setupModeHandler(modes[currentModeName](ctx), ctx);\n    },\n    changeMode,\n    actionable,\n    currentModeName() {\n      return currentModeName;\n    },\n    currentModeRender(geojson, push) {\n      return currentMode.render(geojson, push);\n    },\n    fire(eventName, eventData) {\n      if (!ctx.map) return;\n      ctx.map.fire(eventName, eventData);\n    },\n    addEventListeners() {\n      ctx.map.on('mousemove', events.mousemove);\n      ctx.map.on('mousedown', events.mousedown);\n      ctx.map.on('mouseup', events.mouseup);\n      ctx.map.on('data', events.data);\n\n      ctx.map.on('touchmove', events.touchmove);\n      ctx.map.on('touchstart', events.touchstart);\n      ctx.map.on('touchend', events.touchend);\n\n      ctx.container.addEventListener('mouseout', events.mouseout);\n\n      if (ctx.options.keybindings) {\n        ctx.container.addEventListener('keydown', events.keydown);\n        ctx.container.addEventListener('keyup', events.keyup);\n      }\n    },\n    removeEventListeners() {\n      ctx.map.off('mousemove', events.mousemove);\n      ctx.map.off('mousedown', events.mousedown);\n      ctx.map.off('mouseup', events.mouseup);\n      ctx.map.off('data', events.data);\n\n      ctx.map.off('touchmove', events.touchmove);\n      ctx.map.off('touchstart', events.touchstart);\n      ctx.map.off('touchend', events.touchend);\n\n      ctx.container.removeEventListener('mouseout', events.mouseout);\n\n      if (ctx.options.keybindings) {\n        ctx.container.removeEventListener('keydown', events.keydown);\n        ctx.container.removeEventListener('keyup', events.keyup);\n      }\n    },\n    trash(options) {\n      currentMode.trash(options);\n    },\n    combineFeatures() {\n      currentMode.combineFeatures();\n    },\n    uncombineFeatures() {\n      currentMode.uncombineFeatures();\n    },\n    getMode() {\n      return currentModeName;\n    }\n  };\n\n  return api;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}