{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar _tslib = require('./_virtual/_tslib.js');\nvar defaultWaitForOptions = {\n  timeout: 10000 // 10 seconds\n};\n/**\r\n * Subscribes to an actor ref and waits for its emitted value to satisfy\r\n * a predicate, and then resolves with that value.\r\n * Will throw if the desired state is not reached after a timeout\r\n * (defaults to 10 seconds).\r\n *\r\n * @example\r\n * ```js\r\n * const state = await waitFor(someService, state => {\r\n *   return state.hasTag('loaded');\r\n * });\r\n *\r\n * state.hasTag('loaded'); // true\r\n * ```\r\n *\r\n * @param actorRef The actor ref to subscribe to\r\n * @param predicate Determines if a value matches the condition to wait for\r\n * @param options\r\n * @returns A promise that eventually resolves to the emitted value\r\n * that matches the condition\r\n */\n\nfunction waitFor(actorRef, predicate, options) {\n  var resolvedOptions = _tslib.__assign(_tslib.__assign({}, defaultWaitForOptions), options);\n  return new Promise(function (res, rej) {\n    var done = false;\n    if (process.env.NODE_ENV !== 'production' && resolvedOptions.timeout < 0) {\n      console.error('`timeout` passed to `waitFor` is negative and it will reject its internal promise immediately.');\n    }\n    var handle = resolvedOptions.timeout === Infinity ? undefined : setTimeout(function () {\n      sub.unsubscribe();\n      rej(new Error(\"Timeout of \".concat(resolvedOptions.timeout, \" ms exceeded\")));\n    }, resolvedOptions.timeout);\n    var dispose = function () {\n      clearTimeout(handle);\n      done = true;\n      sub === null || sub === void 0 ? void 0 : sub.unsubscribe();\n    };\n    var sub = actorRef.subscribe({\n      next: function (emitted) {\n        if (predicate(emitted)) {\n          dispose();\n          res(emitted);\n        }\n      },\n      error: function (err) {\n        dispose();\n        rej(err);\n      },\n      complete: function () {\n        dispose();\n        rej(new Error(\"Actor terminated without satisfying predicate\"));\n      }\n    });\n    if (done) {\n      sub.unsubscribe();\n    }\n  });\n}\nexports.waitFor = waitFor;","map":{"version":3,"names":["Object","defineProperty","exports","value","_tslib","require","defaultWaitForOptions","timeout","waitFor","actorRef","predicate","options","resolvedOptions","__assign","Promise","res","rej","done","process","env","NODE_ENV","console","error","handle","Infinity","undefined","setTimeout","sub","unsubscribe","Error","concat","dispose","clearTimeout","subscribe","next","emitted","err","complete"],"sources":["C:/Users/jonat/aws_poc/frontend/node_modules/xstate/lib/waitFor.js"],"sourcesContent":["'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar _tslib = require('./_virtual/_tslib.js');\n\nvar defaultWaitForOptions = {\n  timeout: 10000 // 10 seconds\n\n};\n/**\r\n * Subscribes to an actor ref and waits for its emitted value to satisfy\r\n * a predicate, and then resolves with that value.\r\n * Will throw if the desired state is not reached after a timeout\r\n * (defaults to 10 seconds).\r\n *\r\n * @example\r\n * ```js\r\n * const state = await waitFor(someService, state => {\r\n *   return state.hasTag('loaded');\r\n * });\r\n *\r\n * state.hasTag('loaded'); // true\r\n * ```\r\n *\r\n * @param actorRef The actor ref to subscribe to\r\n * @param predicate Determines if a value matches the condition to wait for\r\n * @param options\r\n * @returns A promise that eventually resolves to the emitted value\r\n * that matches the condition\r\n */\n\nfunction waitFor(actorRef, predicate, options) {\n  var resolvedOptions = _tslib.__assign(_tslib.__assign({}, defaultWaitForOptions), options);\n\n  return new Promise(function (res, rej) {\n    var done = false;\n\n    if (process.env.NODE_ENV !== 'production' && resolvedOptions.timeout < 0) {\n      console.error('`timeout` passed to `waitFor` is negative and it will reject its internal promise immediately.');\n    }\n\n    var handle = resolvedOptions.timeout === Infinity ? undefined : setTimeout(function () {\n      sub.unsubscribe();\n      rej(new Error(\"Timeout of \".concat(resolvedOptions.timeout, \" ms exceeded\")));\n    }, resolvedOptions.timeout);\n\n    var dispose = function () {\n      clearTimeout(handle);\n      done = true;\n      sub === null || sub === void 0 ? void 0 : sub.unsubscribe();\n    };\n\n    var sub = actorRef.subscribe({\n      next: function (emitted) {\n        if (predicate(emitted)) {\n          dispose();\n          res(emitted);\n        }\n      },\n      error: function (err) {\n        dispose();\n        rej(err);\n      },\n      complete: function () {\n        dispose();\n        rej(new Error(\"Actor terminated without satisfying predicate\"));\n      }\n    });\n\n    if (done) {\n      sub.unsubscribe();\n    }\n  });\n}\n\nexports.waitFor = waitFor;\n"],"mappings":"AAAA,YAAY;;AAEZA,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAK,CAAC,CAAC;AAE7D,IAAIC,MAAM,GAAGC,OAAO,CAAC,sBAAsB,CAAC;AAE5C,IAAIC,qBAAqB,GAAG;EAC1BC,OAAO,EAAE,KAAK,CAAC;AAEjB,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAASC,OAAOA,CAACC,QAAQ,EAAEC,SAAS,EAAEC,OAAO,EAAE;EAC7C,IAAIC,eAAe,GAAGR,MAAM,CAACS,QAAQ,CAACT,MAAM,CAACS,QAAQ,CAAC,CAAC,CAAC,EAAEP,qBAAqB,CAAC,EAAEK,OAAO,CAAC;EAE1F,OAAO,IAAIG,OAAO,CAAC,UAAUC,GAAG,EAAEC,GAAG,EAAE;IACrC,IAAIC,IAAI,GAAG,KAAK;IAEhB,IAAIC,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,YAAY,IAAIR,eAAe,CAACL,OAAO,GAAG,CAAC,EAAE;MACxEc,OAAO,CAACC,KAAK,CAAC,gGAAgG,CAAC;IACjH;IAEA,IAAIC,MAAM,GAAGX,eAAe,CAACL,OAAO,KAAKiB,QAAQ,GAAGC,SAAS,GAAGC,UAAU,CAAC,YAAY;MACrFC,GAAG,CAACC,WAAW,CAAC,CAAC;MACjBZ,GAAG,CAAC,IAAIa,KAAK,CAAC,aAAa,CAACC,MAAM,CAAClB,eAAe,CAACL,OAAO,EAAE,cAAc,CAAC,CAAC,CAAC;IAC/E,CAAC,EAAEK,eAAe,CAACL,OAAO,CAAC;IAE3B,IAAIwB,OAAO,GAAG,SAAAA,CAAA,EAAY;MACxBC,YAAY,CAACT,MAAM,CAAC;MACpBN,IAAI,GAAG,IAAI;MACXU,GAAG,KAAK,IAAI,IAAIA,GAAG,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,GAAG,CAACC,WAAW,CAAC,CAAC;IAC7D,CAAC;IAED,IAAID,GAAG,GAAGlB,QAAQ,CAACwB,SAAS,CAAC;MAC3BC,IAAI,EAAE,SAAAA,CAAUC,OAAO,EAAE;QACvB,IAAIzB,SAAS,CAACyB,OAAO,CAAC,EAAE;UACtBJ,OAAO,CAAC,CAAC;UACThB,GAAG,CAACoB,OAAO,CAAC;QACd;MACF,CAAC;MACDb,KAAK,EAAE,SAAAA,CAAUc,GAAG,EAAE;QACpBL,OAAO,CAAC,CAAC;QACTf,GAAG,CAACoB,GAAG,CAAC;MACV,CAAC;MACDC,QAAQ,EAAE,SAAAA,CAAA,EAAY;QACpBN,OAAO,CAAC,CAAC;QACTf,GAAG,CAAC,IAAIa,KAAK,CAAC,+CAA+C,CAAC,CAAC;MACjE;IACF,CAAC,CAAC;IAEF,IAAIZ,IAAI,EAAE;MACRU,GAAG,CAACC,WAAW,CAAC,CAAC;IACnB;EACF,CAAC,CAAC;AACJ;AAEA1B,OAAO,CAACM,OAAO,GAAGA,OAAO","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}