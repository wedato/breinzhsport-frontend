{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { __awaiter, __generator, __read, __spread } from \"tslib\";\nvar eventListeners = {};\nexport var notifyEventListeners = function (type) {\n  var args = [];\n  for (var _i = 1; _i < arguments.length; _i++) {\n    args[_i - 1] = arguments[_i];\n  }\n  var _a;\n  (_a = eventListeners[type]) === null || _a === void 0 ? void 0 : _a.forEach(function (listener) {\n    listener.handleEvent.apply(listener, __spread(args));\n  });\n};\nexport var notifyEventListenersAndAwaitHandlers = function (type) {\n  var args = [];\n  for (var _i = 1; _i < arguments.length; _i++) {\n    args[_i - 1] = arguments[_i];\n  }\n  var _a;\n  return Promise.all(Array.from((_a = eventListeners[type]) !== null && _a !== void 0 ? _a : []).map(function (listener) {\n    return __awaiter(void 0, void 0, void 0, function () {\n      var err_1;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            _a.trys.push([0, 2,, 3]);\n            return [4 /*yield*/, listener.handleEvent.apply(listener, __spread(args))];\n          case 1:\n            _a.sent();\n            return [3 /*break*/, 3];\n          case 2:\n            err_1 = _a.sent();\n            throw err_1;\n          case 3:\n            return [2 /*return*/];\n        }\n      });\n    });\n  }));\n};\nexport var addEventListener = function (type, handler) {\n  // If there is no listener set for the event type, just create it\n  if (!eventListeners[type]) {\n    eventListeners[type] = new Set();\n  }\n  var listener = {\n    handleEvent: handler,\n    remove: function () {\n      eventListeners[type].delete(listener);\n    }\n  };\n  eventListeners[type].add(listener);\n  return listener;\n};","map":{"version":3,"names":["eventListeners","notifyEventListeners","type","args","_i","arguments","length","_a","forEach","listener","handleEvent","apply","__spread","notifyEventListenersAndAwaitHandlers","Promise","all","Array","from","map","__awaiter","sent","err_1","addEventListener","handler","Set","remove","delete","add"],"sources":["C:\\Users\\jonat\\aws_poc\\frontend\\node_modules\\@aws-amplify\\notifications\\src\\common\\eventListeners\\index.ts"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { EventListener, EventType } from './types';\n\nconst eventListeners: Record<string, Set<EventListener<Function>>> = {};\n\nexport const notifyEventListeners = (type: EventType, ...args: any[]): void => {\n\teventListeners[type]?.forEach(listener => {\n\t\tlistener.handleEvent(...args);\n\t});\n};\n\nexport const notifyEventListenersAndAwaitHandlers = (\n\ttype: EventType,\n\t...args: any[]\n): Promise<void[]> =>\n\tPromise.all<void>(\n\t\tArray.from(eventListeners[type] ?? []).map(async listener => {\n\t\t\ttry {\n\t\t\t\tawait listener.handleEvent(...args);\n\t\t\t} catch (err) {\n\t\t\t\tthrow err;\n\t\t\t}\n\t\t})\n\t);\n\nexport const addEventListener = <EventHandler extends Function>(\n\ttype: EventType,\n\thandler: EventHandler\n): EventListener<EventHandler> => {\n\t// If there is no listener set for the event type, just create it\n\tif (!eventListeners[type]) {\n\t\teventListeners[type] = new Set<EventListener<EventHandler>>();\n\t}\n\tconst listener = {\n\t\thandleEvent: handler,\n\t\tremove: () => {\n\t\t\teventListeners[type].delete(listener);\n\t\t},\n\t};\n\teventListeners[type].add(listener);\n\treturn listener;\n};\n"],"mappings":"AAAA;AACA;;AAIA,IAAMA,cAAc,GAAiD,EAAE;AAEvE,OAAO,IAAMC,oBAAoB,GAAG,SAAAA,CAACC,IAAe;EAAE,IAAAC,IAAA;OAAA,IAAAC,EAAA,IAAc,EAAdA,EAAA,GAAAC,SAAA,CAAAC,MAAc,EAAdF,EAAA,EAAc;IAAdD,IAAA,CAAAC,EAAA,QAAAC,SAAA,CAAAD,EAAA;;;EACrD,CAAAG,EAAA,GAAAP,cAAc,CAACE,IAAI,CAAC,cAAAK,EAAA,uBAAAA,EAAA,CAAEC,OAAO,CAAC,UAAAC,QAAQ;IACrCA,QAAQ,CAACC,WAAW,CAAAC,KAAA,CAApBF,QAAQ,EAAAG,QAAA,CAAgBT,IAAI;EAC7B,CAAC;AACF,CAAC;AAED,OAAO,IAAMU,oCAAoC,GAAG,SAAAA,CACnDX,IAAe;EACf,IAAAC,IAAA;OAAA,IAAAC,EAAA,IAAc,EAAdA,EAAA,GAAAC,SAAA,CAAAC,MAAc,EAAdF,EAAA,EAAc;IAAdD,IAAA,CAAAC,EAAA,QAAAC,SAAA,CAAAD,EAAA;;;EAEA,OAAAU,OAAO,CAACC,GAAG,CACVC,KAAK,CAACC,IAAI,EAAAV,EAAA,GAACP,cAAc,CAACE,IAAI,CAAC,cAAAK,EAAA,cAAAA,EAAA,GAAI,EAAE,CAAC,CAACW,GAAG,CAAC,UAAMT,QAAQ;IAAA,OAAAU,SAAA;;;;;;YAEvD,qBAAMV,QAAQ,CAACC,WAAW,CAAAC,KAAA,CAApBF,QAAQ,EAAAG,QAAA,CAAgBT,IAAI;;YAAlCI,EAAA,CAAAa,IAAA,EAAmC;;;;YAEnC,MAAMC,KAAG;;;;;;GAEV,CAAC,CACF;CAAA;AAEF,OAAO,IAAMC,gBAAgB,GAAG,SAAAA,CAC/BpB,IAAe,EACfqB,OAAqB;EAErB;EACA,IAAI,CAACvB,cAAc,CAACE,IAAI,CAAC,EAAE;IAC1BF,cAAc,CAACE,IAAI,CAAC,GAAG,IAAIsB,GAAG,EAA+B;;EAE9D,IAAMf,QAAQ,GAAG;IAChBC,WAAW,EAAEa,OAAO;IACpBE,MAAM,EAAE,SAAAA,CAAA;MACPzB,cAAc,CAACE,IAAI,CAAC,CAACwB,MAAM,CAACjB,QAAQ,CAAC;IACtC;GACA;EACDT,cAAc,CAACE,IAAI,CAAC,CAACyB,GAAG,CAAClB,QAAQ,CAAC;EAClC,OAAOA,QAAQ;AAChB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}