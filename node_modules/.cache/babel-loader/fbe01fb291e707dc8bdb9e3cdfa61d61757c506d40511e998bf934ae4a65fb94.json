{"ast":null,"code":"import React,{createContext,useState,useEffect}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";export const CartContext=/*#__PURE__*/createContext();export const CartProvider=_ref=>{let{children}=_ref;const[cart,setCart]=useState(()=>{// Récupérer le panier du localStorage s'il existe\nconst savedCart=localStorage.getItem(\"cart\");return savedCart?JSON.parse(savedCart):[];});// Sauvegarder le panier dans localStorage à chaque modification\nuseEffect(()=>{localStorage.setItem(\"cart\",JSON.stringify(cart));},[cart]);// Ajouter un produit au panier\nconst addToCart=function(product){let quantity=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;setCart(prevCart=>{// Vérifier si le produit est déjà dans le panier\nconst existingItemIndex=prevCart.findIndex(item=>item.id===product.id);if(existingItemIndex>=0){// Si le produit existe déjà, mettre à jour la quantité\nconst updatedCart=[...prevCart];updatedCart[existingItemIndex]={...updatedCart[existingItemIndex],quantity:updatedCart[existingItemIndex].quantity+quantity};return updatedCart;}else{// Sinon, ajouter le nouveau produit\nreturn[...prevCart,{...product,quantity}];}});};// Mettre à jour la quantité d'un produit\nconst updateQuantity=(productId,quantity)=>{if(quantity<=0){removeFromCart(productId);return;}setCart(prevCart=>prevCart.map(item=>item.id===productId?{...item,quantity}:item));};// Supprimer un produit du panier\nconst removeFromCart=productId=>{setCart(prevCart=>prevCart.filter(item=>item.id!==productId));};// Vider le panier\nconst clearCart=()=>{setCart([]);};// Calculer le total du panier\nconst getCartTotal=()=>{return cart.reduce((total,item)=>total+item.price*item.quantity,0);};return/*#__PURE__*/_jsx(CartContext.Provider,{value:{cart,addToCart,updateQuantity,removeFromCart,clearCart,getCartTotal},children:children});};","map":{"version":3,"names":["React","createContext","useState","useEffect","jsx","_jsx","CartContext","CartProvider","_ref","children","cart","setCart","savedCart","localStorage","getItem","JSON","parse","setItem","stringify","addToCart","product","quantity","arguments","length","undefined","prevCart","existingItemIndex","findIndex","item","id","updatedCart","updateQuantity","productId","removeFromCart","map","filter","clearCart","getCartTotal","reduce","total","price","Provider","value"],"sources":["C:/Users/jonat/aws_poc/frontend/src/context/CartContext.js"],"sourcesContent":["import React, { createContext, useState, useEffect } from \"react\";\n\nexport const CartContext = createContext();\n\nexport const CartProvider = ({ children }) => {\n  const [cart, setCart] = useState(() => {\n    // Récupérer le panier du localStorage s'il existe\n    const savedCart = localStorage.getItem(\"cart\");\n    return savedCart ? JSON.parse(savedCart) : [];\n  });\n\n  // Sauvegarder le panier dans localStorage à chaque modification\n  useEffect(() => {\n    localStorage.setItem(\"cart\", JSON.stringify(cart));\n  }, [cart]);\n\n  // Ajouter un produit au panier\n  const addToCart = (product, quantity = 1) => {\n    setCart((prevCart) => {\n      // Vérifier si le produit est déjà dans le panier\n      const existingItemIndex = prevCart.findIndex(\n        (item) => item.id === product.id\n      );\n\n      if (existingItemIndex >= 0) {\n        // Si le produit existe déjà, mettre à jour la quantité\n        const updatedCart = [...prevCart];\n        updatedCart[existingItemIndex] = {\n          ...updatedCart[existingItemIndex],\n          quantity: updatedCart[existingItemIndex].quantity + quantity,\n        };\n        return updatedCart;\n      } else {\n        // Sinon, ajouter le nouveau produit\n        return [...prevCart, { ...product, quantity }];\n      }\n    });\n  };\n\n  // Mettre à jour la quantité d'un produit\n  const updateQuantity = (productId, quantity) => {\n    if (quantity <= 0) {\n      removeFromCart(productId);\n      return;\n    }\n\n    setCart((prevCart) =>\n      prevCart.map((item) =>\n        item.id === productId ? { ...item, quantity } : item\n      )\n    );\n  };\n\n  // Supprimer un produit du panier\n  const removeFromCart = (productId) => {\n    setCart((prevCart) => prevCart.filter((item) => item.id !== productId));\n  };\n\n  // Vider le panier\n  const clearCart = () => {\n    setCart([]);\n  };\n\n  // Calculer le total du panier\n  const getCartTotal = () => {\n    return cart.reduce((total, item) => total + item.price * item.quantity, 0);\n  };\n\n  return (\n    <CartContext.Provider\n      value={{\n        cart,\n        addToCart,\n        updateQuantity,\n        removeFromCart,\n        clearCart,\n        getCartTotal,\n      }}\n    >\n      {children}\n    </CartContext.Provider>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}