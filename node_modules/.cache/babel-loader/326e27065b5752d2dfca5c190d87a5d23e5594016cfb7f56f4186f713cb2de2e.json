{"ast":null,"code":"import { __awaiter as e } from \"tslib\";\nimport t from \"qrcode\";\nimport * as o from \"react\";\nimport { Logger as r } from \"aws-amplify\";\nimport { authenticatorTextUtil as a, getTotpCodeURL as m } from \"@aws-amplify/ui\";\nimport { Flex as i } from \"../../../primitives/Flex/Flex.mjs\";\nimport { Heading as n } from \"../../../primitives/Heading/Heading.mjs\";\nimport { useAuthenticator as l } from \"@aws-amplify/ui-react-core\";\nimport { useCustomComponents as s } from \"../hooks/useCustomComponents/index.mjs\";\nimport { useFormHandlers as c } from \"../hooks/useFormHandlers/useFormHandlers.mjs\";\nimport { ConfirmSignInFooter as d } from \"../shared/ConfirmSignInFooter.mjs\";\nimport { RemoteErrorMessage as p } from \"../shared/RemoteErrorMessage.mjs\";\nimport { FormFields as u } from \"../shared/FormFields.mjs\";\nimport { RouteContainer as f } from \"../RouteContainer/RouteContainer.mjs\";\nconst g = new r(\"SetupTOTP-logger\"),\n  {\n    getSetupTOTPText: h,\n    getCopiedText: E,\n    getLoadingText: v\n  } = a,\n  C = ({\n    className: r,\n    variation: a\n  }) => {\n    var n;\n    const {\n        totpSecretCode: h,\n        isPending: y,\n        user: H,\n        QRFields: w\n      } = l(e => [e.isPending, e.totpSecretCode]),\n      {\n        handleChange: S,\n        handleSubmit: F\n      } = c(),\n      {\n        components: {\n          SetupTOTP: {\n            Header: x = C.Header,\n            Footer: T = C.Footer\n          }\n        }\n      } = s(),\n      [j, V] = o.useState(!0),\n      [b, P] = o.useState(),\n      [R, k] = o.useState(\"COPY\"),\n      {\n        totpIssuer: L = \"AWSCognito\",\n        totpUsername: M = null == H ? void 0 : H.username\n      } = null !== (n = w) && void 0 !== n ? n : {},\n      O = o.useCallback(() => e(void 0, void 0, void 0, function* () {\n        try {\n          const e = m(L, M, h),\n            o = yield t.toDataURL(e);\n          P(o);\n        } catch (e) {\n          g.error(e);\n        } finally {\n          V(!1);\n        }\n      }), [L, M, h]);\n    o.useEffect(() => {\n      b || O();\n    }, [O, b]);\n    return o.createElement(f, {\n      className: r,\n      variation: a\n    }, o.createElement(\"form\", {\n      \"data-amplify-form\": \"\",\n      \"data-amplify-authenticator-setup-totp\": \"\",\n      method: \"post\",\n      onChange: S,\n      onSubmit: F\n    }, o.createElement(i, {\n      as: \"fieldset\",\n      direction: \"column\",\n      isDisabled: y\n    }, o.createElement(x, null), o.createElement(i, {\n      direction: \"column\"\n    }, j ? o.createElement(\"p\", null, v(), \"…\") : o.createElement(\"img\", {\n      \"data-amplify-qrcode\": !0,\n      src: b,\n      alt: \"qr code\",\n      width: \"228\",\n      height: \"228\"\n    }), o.createElement(i, {\n      \"data-amplify-copy\": !0\n    }, o.createElement(\"div\", null, h), o.createElement(i, {\n      \"data-amplify-copy-svg\": !0,\n      onClick: () => {\n        navigator.clipboard.writeText(h), k(E());\n      }\n    }, o.createElement(\"div\", {\n      \"data-amplify-copy-tooltip\": !0\n    }, R), o.createElement(\"svg\", {\n      width: \"24\",\n      height: \"24\",\n      viewBox: \"0 0 24 24\",\n      xmlns: \"http://www.w3.org/2000/svg\"\n    }, o.createElement(\"path\", {\n      d: \"M16 1H4C2.9 1 2 1.9 2 3V17H4V3H16V1ZM15 5H8C6.9 5 6.01 5.9 6.01 7L6 21C6 22.1 6.89 23 7.99 23H19C20.1 23 21 22.1 21 21V11L15 5ZM8 21V7H14V12H19V21H8Z\"\n    })))), o.createElement(u, null), o.createElement(p, null)), o.createElement(d, null), o.createElement(T, null))));\n  };\nC.Header = function () {\n  return o.createElement(n, {\n    level: 3\n  }, h());\n}, C.Footer = function () {\n  return null;\n};\nexport { C as SetupTOTP };","map":{"version":3,"names":["__awaiter","e","t","o","Logger","r","authenticatorTextUtil","a","getTotpCodeURL","m","Flex","i","Heading","n","useAuthenticator","l","useCustomComponents","s","useFormHandlers","c","ConfirmSignInFooter","d","RemoteErrorMessage","p","FormFields","u","RouteContainer","f","g","getSetupTOTPText","h","getCopiedText","E","getLoadingText","v","C","className","variation","totpSecretCode","isPending","y","user","H","QRFields","w","handleChange","S","handleSubmit","F","components","SetupTOTP","Header","x","Footer","T","j","V","useState","b","P","R","k","totpIssuer","L","totpUsername","M","username","O","useCallback","toDataURL","error","useEffect","createElement","method","onChange","onSubmit","as","direction","isDisabled","src","alt","width","height","onClick","navigator","clipboard","writeText","viewBox","xmlns","level"],"sources":["C:/Users/jonat/aws_poc/frontend/node_modules/@aws-amplify/ui-react/dist/esm/components/Authenticator/SetupTOTP/SetupTOTP.mjs"],"sourcesContent":["import{__awaiter as e}from\"tslib\";import t from\"qrcode\";import*as o from\"react\";import{Logger as r}from\"aws-amplify\";import{authenticatorTextUtil as a,getTotpCodeURL as m}from\"@aws-amplify/ui\";import{Flex as i}from\"../../../primitives/Flex/Flex.mjs\";import{Heading as n}from\"../../../primitives/Heading/Heading.mjs\";import{useAuthenticator as l}from\"@aws-amplify/ui-react-core\";import{useCustomComponents as s}from\"../hooks/useCustomComponents/index.mjs\";import{useFormHandlers as c}from\"../hooks/useFormHandlers/useFormHandlers.mjs\";import{ConfirmSignInFooter as d}from\"../shared/ConfirmSignInFooter.mjs\";import{RemoteErrorMessage as p}from\"../shared/RemoteErrorMessage.mjs\";import{FormFields as u}from\"../shared/FormFields.mjs\";import{RouteContainer as f}from\"../RouteContainer/RouteContainer.mjs\";const g=new r(\"SetupTOTP-logger\"),{getSetupTOTPText:h,getCopiedText:E,getLoadingText:v}=a,C=({className:r,variation:a})=>{var n;const{totpSecretCode:h,isPending:y,user:H,QRFields:w}=l((e=>[e.isPending,e.totpSecretCode])),{handleChange:S,handleSubmit:F}=c(),{components:{SetupTOTP:{Header:x=C.Header,Footer:T=C.Footer}}}=s(),[j,V]=o.useState(!0),[b,P]=o.useState(),[R,k]=o.useState(\"COPY\"),{totpIssuer:L=\"AWSCognito\",totpUsername:M=(null==H?void 0:H.username)}=null!==(n=w)&&void 0!==n?n:{},O=o.useCallback((()=>e(void 0,void 0,void 0,(function*(){try{const e=m(L,M,h),o=yield t.toDataURL(e);P(o)}catch(e){g.error(e)}finally{V(!1)}}))),[L,M,h]);o.useEffect((()=>{b||O()}),[O,b]);return o.createElement(f,{className:r,variation:a},o.createElement(\"form\",{\"data-amplify-form\":\"\",\"data-amplify-authenticator-setup-totp\":\"\",method:\"post\",onChange:S,onSubmit:F},o.createElement(i,{as:\"fieldset\",direction:\"column\",isDisabled:y},o.createElement(x,null),o.createElement(i,{direction:\"column\"},j?o.createElement(\"p\",null,v(),\"…\"):o.createElement(\"img\",{\"data-amplify-qrcode\":!0,src:b,alt:\"qr code\",width:\"228\",height:\"228\"}),o.createElement(i,{\"data-amplify-copy\":!0},o.createElement(\"div\",null,h),o.createElement(i,{\"data-amplify-copy-svg\":!0,onClick:()=>{navigator.clipboard.writeText(h),k(E())}},o.createElement(\"div\",{\"data-amplify-copy-tooltip\":!0},R),o.createElement(\"svg\",{width:\"24\",height:\"24\",viewBox:\"0 0 24 24\",xmlns:\"http://www.w3.org/2000/svg\"},o.createElement(\"path\",{d:\"M16 1H4C2.9 1 2 1.9 2 3V17H4V3H16V1ZM15 5H8C6.9 5 6.01 5.9 6.01 7L6 21C6 22.1 6.89 23 7.99 23H19C20.1 23 21 22.1 21 21V11L15 5ZM8 21V7H14V12H19V21H8Z\"})))),o.createElement(u,null),o.createElement(p,null)),o.createElement(d,null),o.createElement(T,null))))};C.Header=function(){return o.createElement(n,{level:3},h())},C.Footer=function(){return null};export{C as SetupTOTP};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}