{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{Link,useLocation}from\"react-router-dom\";import{getProducts}from\"../services/api\";import\"./ProductsPage.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ProductsPage(){const[products,setProducts]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[selectedCategory,setSelectedCategory]=useState(\"\");const location=useLocation();// Catégories disponibles\nconst categories=[{id:\"all\",name:\"Tous les produits\"},{id:\"football\",name:\"Football\"},{id:\"basketball\",name:\"Basketball\"},{id:\"running\",name:\"Course à pied\"},{id:\"fitness\",name:\"Fitness\"}];useEffect(()=>{// Extraire la catégorie des paramètres d'URL\nconst params=new URLSearchParams(location.search);const categoryParam=params.get(\"category\");if(categoryParam){setSelectedCategory(categoryParam);}async function fetchProducts(){try{let fetchedProducts;try{// Essayer d'abord de récupérer les produits depuis l'API\nfetchedProducts=await getProducts();}catch(apiError){console.warn(\"Erreur API, utilisation des données de secours:\",apiError);// Utiliser des données de secours en cas d'erreur API\nfetchedProducts=[{id:\"1\",name:\"Ballon de football professionnel\",price:49.99,category:\"football\",description:\"Ballon de football de qualité professionnelle, idéal pour les matchs et l'entraînement.\",image:\"https://via.placeholder.com/300x300?text=Football\"},{id:\"2\",name:\"Chaussures de running\",price:89.99,category:\"running\",description:\"Chaussures légères et confortables pour la course à pied sur tous types de terrains.\",image:\"https://via.placeholder.com/300x300?text=Running+Shoes\"},{id:\"3\",name:\"Maillot de basketball\",price:59.99,category:\"basketball\",description:\"Maillot respirant et léger pour le basketball, design moderne.\",image:\"https://via.placeholder.com/300x300?text=Basketball+Jersey\"},{id:\"4\",name:\"Tapis de yoga\",price:29.99,category:\"fitness\",description:\"Tapis de yoga antidérapant et confortable pour vos séances de fitness.\",image:\"https://via.placeholder.com/300x300?text=Yoga+Mat\"},{id:\"5\",name:\"Gants de gardien de but\",price:34.99,category:\"football\",description:\"Gants de gardien de but avec grip amélioré et protection des doigts.\",image:\"https://via.placeholder.com/300x300?text=Goalkeeper+Gloves\"},{id:\"6\",name:\"Ballon de basketball\",price:39.99,category:\"basketball\",description:\"Ballon de basketball taille officielle avec excellent grip.\",image:\"https://via.placeholder.com/300x300?text=Basketball\"},{id:\"7\",name:\"Montre de sport GPS\",price:129.99,category:\"running\",description:\"Montre GPS pour suivre vos performances de course avec précision.\",image:\"https://via.placeholder.com/300x300?text=GPS+Watch\"},{id:\"8\",name:\"Haltères (paire)\",price:49.99,category:\"fitness\",description:\"Paire d'haltères de 5kg pour vos exercices de musculation.\",image:\"https://via.placeholder.com/300x300?text=Dumbbells\"}];}// Filtrer par catégorie si nécessaire\nconst filteredProducts=categoryParam&&categoryParam!==\"all\"?fetchedProducts.filter(product=>product.category===categoryParam):fetchedProducts;setProducts(filteredProducts);}catch(error){console.error(\"Erreur lors du chargement des produits:\",error);setError(\"Erreur lors du chargement des produits\");}finally{setLoading(false);}}fetchProducts();},[location.search]);const handleCategoryChange=categoryId=>{setSelectedCategory(categoryId);};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Chargement des produits...\"});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:error});}return/*#__PURE__*/_jsxs(\"div\",{className:\"products-page\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Nos Produits\"}),/*#__PURE__*/_jsx(\"div\",{className:\"category-filters\",children:categories.map(category=>/*#__PURE__*/_jsx(Link,{to:category.id===\"all\"?\"/products\":`/products?category=${category.id}`,className:`category-filter ${selectedCategory===category.id?\"active\":\"\"}`,onClick:()=>handleCategoryChange(category.id),children:category.name},category.id))}),products.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"no-products\",children:\"Aucun produit trouv\\xE9 dans cette cat\\xE9gorie.\"}):/*#__PURE__*/_jsx(\"div\",{className:\"products-grid\",children:products.map(product=>/*#__PURE__*/_jsxs(\"div\",{className:\"product-card\",children:[/*#__PURE__*/_jsxs(Link,{to:`/products/${product.id}`,children:[/*#__PURE__*/_jsx(\"img\",{src:product.image,alt:product.name}),/*#__PURE__*/_jsx(\"h3\",{children:product.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"price\",children:[product.price.toFixed(2),\" \\u20AC\"]})]}),/*#__PURE__*/_jsx(Link,{to:`/products/${product.id}`,className:\"btn\",children:\"Voir le produit\"})]},product.id))})]});}export default ProductsPage;","map":{"version":3,"names":["React","useState","useEffect","Link","useLocation","getProducts","jsx","_jsx","jsxs","_jsxs","ProductsPage","products","setProducts","loading","setLoading","error","setError","selectedCategory","setSelectedCategory","location","categories","id","name","params","URLSearchParams","search","categoryParam","get","fetchProducts","fetchedProducts","apiError","console","warn","price","category","description","image","filteredProducts","filter","product","handleCategoryChange","categoryId","className","children","map","to","onClick","length","src","alt","toFixed"],"sources":["C:/Users/jonat/aws_poc/frontend/src/pages/ProductsPage.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Link, useLocation } from \"react-router-dom\";\nimport { getProducts } from \"../services/api\";\nimport \"./ProductsPage.css\";\n\nfunction ProductsPage() {\n  const [products, setProducts] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [selectedCategory, setSelectedCategory] = useState(\"\");\n\n  const location = useLocation();\n\n  // Catégories disponibles\n  const categories = [\n    { id: \"all\", name: \"Tous les produits\" },\n    { id: \"football\", name: \"Football\" },\n    { id: \"basketball\", name: \"Basketball\" },\n    { id: \"running\", name: \"Course à pied\" },\n    { id: \"fitness\", name: \"Fitness\" },\n  ];\n\n  useEffect(() => {\n    // Extraire la catégorie des paramètres d'URL\n    const params = new URLSearchParams(location.search);\n    const categoryParam = params.get(\"category\");\n    if (categoryParam) {\n      setSelectedCategory(categoryParam);\n    }\n\n    async function fetchProducts() {\n      try {\n        let fetchedProducts;\n\n        try {\n          // Essayer d'abord de récupérer les produits depuis l'API\n          fetchedProducts = await getProducts();\n        } catch (apiError) {\n          console.warn(\n            \"Erreur API, utilisation des données de secours:\",\n            apiError\n          );\n          // Utiliser des données de secours en cas d'erreur API\n          fetchedProducts = [\n            {\n              id: \"1\",\n              name: \"Ballon de football professionnel\",\n              price: 49.99,\n              category: \"football\",\n              description:\n                \"Ballon de football de qualité professionnelle, idéal pour les matchs et l'entraînement.\",\n              image: \"https://via.placeholder.com/300x300?text=Football\",\n            },\n            {\n              id: \"2\",\n              name: \"Chaussures de running\",\n              price: 89.99,\n              category: \"running\",\n              description:\n                \"Chaussures légères et confortables pour la course à pied sur tous types de terrains.\",\n              image: \"https://via.placeholder.com/300x300?text=Running+Shoes\",\n            },\n            {\n              id: \"3\",\n              name: \"Maillot de basketball\",\n              price: 59.99,\n              category: \"basketball\",\n              description:\n                \"Maillot respirant et léger pour le basketball, design moderne.\",\n              image:\n                \"https://via.placeholder.com/300x300?text=Basketball+Jersey\",\n            },\n            {\n              id: \"4\",\n              name: \"Tapis de yoga\",\n              price: 29.99,\n              category: \"fitness\",\n              description:\n                \"Tapis de yoga antidérapant et confortable pour vos séances de fitness.\",\n              image: \"https://via.placeholder.com/300x300?text=Yoga+Mat\",\n            },\n            {\n              id: \"5\",\n              name: \"Gants de gardien de but\",\n              price: 34.99,\n              category: \"football\",\n              description:\n                \"Gants de gardien de but avec grip amélioré et protection des doigts.\",\n              image:\n                \"https://via.placeholder.com/300x300?text=Goalkeeper+Gloves\",\n            },\n            {\n              id: \"6\",\n              name: \"Ballon de basketball\",\n              price: 39.99,\n              category: \"basketball\",\n              description:\n                \"Ballon de basketball taille officielle avec excellent grip.\",\n              image: \"https://via.placeholder.com/300x300?text=Basketball\",\n            },\n            {\n              id: \"7\",\n              name: \"Montre de sport GPS\",\n              price: 129.99,\n              category: \"running\",\n              description:\n                \"Montre GPS pour suivre vos performances de course avec précision.\",\n              image: \"https://via.placeholder.com/300x300?text=GPS+Watch\",\n            },\n            {\n              id: \"8\",\n              name: \"Haltères (paire)\",\n              price: 49.99,\n              category: \"fitness\",\n              description:\n                \"Paire d'haltères de 5kg pour vos exercices de musculation.\",\n              image: \"https://via.placeholder.com/300x300?text=Dumbbells\",\n            },\n          ];\n        }\n\n        // Filtrer par catégorie si nécessaire\n        const filteredProducts =\n          categoryParam && categoryParam !== \"all\"\n            ? fetchedProducts.filter(\n                (product) => product.category === categoryParam\n              )\n            : fetchedProducts;\n\n        setProducts(filteredProducts);\n      } catch (error) {\n        console.error(\"Erreur lors du chargement des produits:\", error);\n        setError(\"Erreur lors du chargement des produits\");\n      } finally {\n        setLoading(false);\n      }\n    }\n\n    fetchProducts();\n  }, [location.search]);\n\n  const handleCategoryChange = (categoryId) => {\n    setSelectedCategory(categoryId);\n  };\n\n  if (loading) {\n    return <div className=\"loading\">Chargement des produits...</div>;\n  }\n\n  if (error) {\n    return <div className=\"error\">{error}</div>;\n  }\n\n  return (\n    <div className=\"products-page\">\n      <h1>Nos Produits</h1>\n\n      {/* Filtres de catégorie */}\n      <div className=\"category-filters\">\n        {categories.map((category) => (\n          <Link\n            key={category.id}\n            to={\n              category.id === \"all\"\n                ? \"/products\"\n                : `/products?category=${category.id}`\n            }\n            className={`category-filter ${\n              selectedCategory === category.id ? \"active\" : \"\"\n            }`}\n            onClick={() => handleCategoryChange(category.id)}\n          >\n            {category.name}\n          </Link>\n        ))}\n      </div>\n\n      {/* Liste des produits */}\n      {products.length === 0 ? (\n        <div className=\"no-products\">\n          Aucun produit trouvé dans cette catégorie.\n        </div>\n      ) : (\n        <div className=\"products-grid\">\n          {products.map((product) => (\n            <div className=\"product-card\" key={product.id}>\n              <Link to={`/products/${product.id}`}>\n                <img src={product.image} alt={product.name} />\n                <h3>{product.name}</h3>\n                <p className=\"price\">{product.price.toFixed(2)} €</p>\n              </Link>\n              <Link to={`/products/${product.id}`} className=\"btn\">\n                Voir le produit\n              </Link>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default ProductsPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}