{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jonat\\\\aws_poc\\\\frontend\\\\src\\\\context\\\\AuthContext.js\",\n  _s = $RefreshSig$();\nimport React, { createContext, useState, useEffect } from \"react\";\nimport { Auth } from \"aws-amplify\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AuthContext = /*#__PURE__*/createContext();\nexport const AuthProvider = ({\n  children,\n  value\n}) => {\n  _s();\n  const [isAuthenticated, setIsAuthenticated] = useState((value === null || value === void 0 ? void 0 : value.isAuthenticated) || false);\n  const [user, setUser] = useState((value === null || value === void 0 ? void 0 : value.user) || null);\n  const [loading, setLoading] = useState(true);\n  const checkAuthState = async () => {\n    try {\n      const user = await Auth.currentAuthenticatedUser();\n      setIsAuthenticated(true);\n      setUser(user);\n      return user;\n    } catch (error) {\n      setIsAuthenticated(false);\n      setUser(null);\n      return null;\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    checkAuthState();\n  }, []);\n  useEffect(() => {\n    if (value) {\n      setIsAuthenticated(value.isAuthenticated);\n      setUser(value.user);\n      setLoading(false);\n    }\n  }, [value]);\n  const signIn = async (email, password) => {\n    try {\n      const user = await Auth.signIn(email, password);\n      setIsAuthenticated(true);\n      setUser(user);\n      return user;\n    } catch (error) {\n      console.error(\"Erreur lors de la connexion:\", error);\n      throw error;\n    }\n  };\n  const signUp = async (email, password, attributes) => {\n    try {\n      const result = await Auth.signUp({\n        username: email,\n        password,\n        attributes\n      });\n      return result;\n    } catch (error) {\n      console.error(\"Erreur lors de l'inscription:\", error);\n      throw error;\n    }\n  };\n  const confirmSignUp = async (email, code) => {\n    try {\n      return await Auth.confirmSignUp(email, code);\n    } catch (error) {\n      console.error(\"Erreur lors de la confirmation de l'inscription:\", error);\n      throw error;\n    }\n  };\n  const signOut = async () => {\n    try {\n      await Auth.signOut();\n      setIsAuthenticated(false);\n      setUser(null);\n    } catch (error) {\n      console.error(\"Erreur lors de la déconnexion:\", error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      isAuthenticated,\n      user,\n      loading,\n      checkAuthState,\n      signIn,\n      signUp,\n      confirmSignUp,\n      signOut\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 5\n  }, this);\n};\n_s(AuthProvider, \"uSwwzuKPaW3QVF0/CxOGqEqznXk=\");\n_c = AuthProvider;\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["React","createContext","useState","useEffect","Auth","jsxDEV","_jsxDEV","AuthContext","AuthProvider","children","value","_s","isAuthenticated","setIsAuthenticated","user","setUser","loading","setLoading","checkAuthState","currentAuthenticatedUser","error","signIn","email","password","console","signUp","attributes","result","username","confirmSignUp","code","signOut","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/jonat/aws_poc/frontend/src/context/AuthContext.js"],"sourcesContent":["import React, { createContext, useState, useEffect } from \"react\";\nimport { Auth } from \"aws-amplify\";\n\nexport const AuthContext = createContext();\n\nexport const AuthProvider = ({ children, value }) => {\n  const [isAuthenticated, setIsAuthenticated] = useState(\n    value?.isAuthenticated || false\n  );\n  const [user, setUser] = useState(value?.user || null);\n  const [loading, setLoading] = useState(true);\n\n  const checkAuthState = async () => {\n    try {\n      const user = await Auth.currentAuthenticatedUser();\n      setIsAuthenticated(true);\n      setUser(user);\n      return user;\n    } catch (error) {\n      setIsAuthenticated(false);\n      setUser(null);\n      return null;\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    checkAuthState();\n  }, []);\n\n  useEffect(() => {\n    if (value) {\n      setIsAuthenticated(value.isAuthenticated);\n      setUser(value.user);\n      setLoading(false);\n    }\n  }, [value]);\n\n  const signIn = async (email, password) => {\n    try {\n      const user = await Auth.signIn(email, password);\n      setIsAuthenticated(true);\n      setUser(user);\n      return user;\n    } catch (error) {\n      console.error(\"Erreur lors de la connexion:\", error);\n      throw error;\n    }\n  };\n\n  const signUp = async (email, password, attributes) => {\n    try {\n      const result = await Auth.signUp({\n        username: email,\n        password,\n        attributes,\n      });\n      return result;\n    } catch (error) {\n      console.error(\"Erreur lors de l'inscription:\", error);\n      throw error;\n    }\n  };\n\n  const confirmSignUp = async (email, code) => {\n    try {\n      return await Auth.confirmSignUp(email, code);\n    } catch (error) {\n      console.error(\"Erreur lors de la confirmation de l'inscription:\", error);\n      throw error;\n    }\n  };\n\n  const signOut = async () => {\n    try {\n      await Auth.signOut();\n      setIsAuthenticated(false);\n      setUser(null);\n    } catch (error) {\n      console.error(\"Erreur lors de la déconnexion:\", error);\n    }\n  };\n\n  return (\n    <AuthContext.Provider\n      value={{\n        isAuthenticated,\n        user,\n        loading,\n        checkAuthState,\n        signIn,\n        signUp,\n        confirmSignUp,\n        signOut,\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}