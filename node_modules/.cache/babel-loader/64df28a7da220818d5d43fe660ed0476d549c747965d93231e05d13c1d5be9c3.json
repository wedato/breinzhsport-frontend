{"ast":null,"code":"const MapboxDraw = require('@mapbox/mapbox-gl-draw');\nconst createSupplementaryPoints = require(\"../utils/create_supplementary_points\");\nconst moveFeatures = require(\"../utils/move_features\");\nconst Constants = require(\"../utils/constants\");\nconst createSupplementaryPointsForCircle = require('../utils/create_supplementary_points_circle');\nconst SimpleSelectModeOverride = MapboxDraw.modes.simple_select;\nSimpleSelectModeOverride.dragMove = function (state, e) {\n  // Dragging when drag move is enabled\n  state.dragMoving = true;\n  e.originalEvent.stopPropagation();\n  const delta = {\n    lng: e.lngLat.lng - state.dragMoveLocation.lng,\n    lat: e.lngLat.lat - state.dragMoveLocation.lat\n  };\n  moveFeatures(this.getSelected(), delta);\n  this.getSelected().filter(feature => feature.properties.isCircle).map(circle => circle.properties.center).forEach(center => {\n    center[0] += delta.lng;\n    center[1] += delta.lat;\n  });\n  state.dragMoveLocation = e.lngLat;\n};\nSimpleSelectModeOverride.toDisplayFeatures = function (state, geojson, display) {\n  geojson.properties.active = this.isSelected(geojson.properties.id) ? Constants.activeStates.ACTIVE : Constants.activeStates.INACTIVE;\n  display(geojson);\n  this.fireActionable();\n  if (geojson.properties.active !== Constants.activeStates.ACTIVE || geojson.geometry.type === Constants.geojsonTypes.POINT) return;\n  const supplementaryPoints = geojson.properties.user_isCircle ? createSupplementaryPointsForCircle(geojson) : createSupplementaryPoints(geojson);\n  supplementaryPoints.forEach(display);\n};\nmodule.exports = SimpleSelectModeOverride;","map":{"version":3,"names":["MapboxDraw","require","createSupplementaryPoints","moveFeatures","Constants","createSupplementaryPointsForCircle","SimpleSelectModeOverride","modes","simple_select","dragMove","state","e","dragMoving","originalEvent","stopPropagation","delta","lng","lngLat","dragMoveLocation","lat","getSelected","filter","feature","properties","isCircle","map","circle","center","forEach","toDisplayFeatures","geojson","display","active","isSelected","id","activeStates","ACTIVE","INACTIVE","fireActionable","geometry","type","geojsonTypes","POINT","supplementaryPoints","user_isCircle","module","exports"],"sources":["C:/Users/jonat/aws_poc/frontend/node_modules/maplibre-gl-draw-circle/lib/modes/SimpleSelectModeOverride.js"],"sourcesContent":["const MapboxDraw = require('@mapbox/mapbox-gl-draw');\nconst createSupplementaryPoints = require(\"../utils/create_supplementary_points\");\nconst moveFeatures = require(\"../utils/move_features\");\nconst Constants = require(\"../utils/constants\");\nconst createSupplementaryPointsForCircle = require('../utils/create_supplementary_points_circle');\n\n\nconst SimpleSelectModeOverride = MapboxDraw.modes.simple_select;\n\nSimpleSelectModeOverride.dragMove = function(state, e) {\n  // Dragging when drag move is enabled\n  state.dragMoving = true;\n  e.originalEvent.stopPropagation();\n\n  const delta = {\n    lng: e.lngLat.lng - state.dragMoveLocation.lng,\n    lat: e.lngLat.lat - state.dragMoveLocation.lat\n  };\n\n  moveFeatures(this.getSelected(), delta);\n\n  this.getSelected()\n    .filter(feature => feature.properties.isCircle)\n    .map(circle => circle.properties.center)\n    .forEach(center => {\n      center[0] += delta.lng;\n      center[1] += delta.lat;\n    });\n\n  state.dragMoveLocation = e.lngLat;\n};\n\nSimpleSelectModeOverride.toDisplayFeatures = function(state, geojson, display) {\n    geojson.properties.active = (this.isSelected(geojson.properties.id)) ?\n      Constants.activeStates.ACTIVE : Constants.activeStates.INACTIVE;\n    display(geojson);\n    this.fireActionable();\n    if (geojson.properties.active !== Constants.activeStates.ACTIVE ||\n      geojson.geometry.type === Constants.geojsonTypes.POINT) return;\n    const supplementaryPoints = geojson.properties.user_isCircle ?\n      createSupplementaryPointsForCircle(geojson) : createSupplementaryPoints(geojson);\n    supplementaryPoints.forEach(display);\n};\n  \nmodule.exports = SimpleSelectModeOverride;"],"mappings":"AAAA,MAAMA,UAAU,GAAGC,OAAO,CAAC,wBAAwB,CAAC;AACpD,MAAMC,yBAAyB,GAAGD,OAAO,CAAC,sCAAsC,CAAC;AACjF,MAAME,YAAY,GAAGF,OAAO,CAAC,wBAAwB,CAAC;AACtD,MAAMG,SAAS,GAAGH,OAAO,CAAC,oBAAoB,CAAC;AAC/C,MAAMI,kCAAkC,GAAGJ,OAAO,CAAC,6CAA6C,CAAC;AAGjG,MAAMK,wBAAwB,GAAGN,UAAU,CAACO,KAAK,CAACC,aAAa;AAE/DF,wBAAwB,CAACG,QAAQ,GAAG,UAASC,KAAK,EAAEC,CAAC,EAAE;EACrD;EACAD,KAAK,CAACE,UAAU,GAAG,IAAI;EACvBD,CAAC,CAACE,aAAa,CAACC,eAAe,CAAC,CAAC;EAEjC,MAAMC,KAAK,GAAG;IACZC,GAAG,EAAEL,CAAC,CAACM,MAAM,CAACD,GAAG,GAAGN,KAAK,CAACQ,gBAAgB,CAACF,GAAG;IAC9CG,GAAG,EAAER,CAAC,CAACM,MAAM,CAACE,GAAG,GAAGT,KAAK,CAACQ,gBAAgB,CAACC;EAC7C,CAAC;EAEDhB,YAAY,CAAC,IAAI,CAACiB,WAAW,CAAC,CAAC,EAAEL,KAAK,CAAC;EAEvC,IAAI,CAACK,WAAW,CAAC,CAAC,CACfC,MAAM,CAACC,OAAO,IAAIA,OAAO,CAACC,UAAU,CAACC,QAAQ,CAAC,CAC9CC,GAAG,CAACC,MAAM,IAAIA,MAAM,CAACH,UAAU,CAACI,MAAM,CAAC,CACvCC,OAAO,CAACD,MAAM,IAAI;IACjBA,MAAM,CAAC,CAAC,CAAC,IAAIZ,KAAK,CAACC,GAAG;IACtBW,MAAM,CAAC,CAAC,CAAC,IAAIZ,KAAK,CAACI,GAAG;EACxB,CAAC,CAAC;EAEJT,KAAK,CAACQ,gBAAgB,GAAGP,CAAC,CAACM,MAAM;AACnC,CAAC;AAEDX,wBAAwB,CAACuB,iBAAiB,GAAG,UAASnB,KAAK,EAAEoB,OAAO,EAAEC,OAAO,EAAE;EAC3ED,OAAO,CAACP,UAAU,CAACS,MAAM,GAAI,IAAI,CAACC,UAAU,CAACH,OAAO,CAACP,UAAU,CAACW,EAAE,CAAC,GACjE9B,SAAS,CAAC+B,YAAY,CAACC,MAAM,GAAGhC,SAAS,CAAC+B,YAAY,CAACE,QAAQ;EACjEN,OAAO,CAACD,OAAO,CAAC;EAChB,IAAI,CAACQ,cAAc,CAAC,CAAC;EACrB,IAAIR,OAAO,CAACP,UAAU,CAACS,MAAM,KAAK5B,SAAS,CAAC+B,YAAY,CAACC,MAAM,IAC7DN,OAAO,CAACS,QAAQ,CAACC,IAAI,KAAKpC,SAAS,CAACqC,YAAY,CAACC,KAAK,EAAE;EAC1D,MAAMC,mBAAmB,GAAGb,OAAO,CAACP,UAAU,CAACqB,aAAa,GAC1DvC,kCAAkC,CAACyB,OAAO,CAAC,GAAG5B,yBAAyB,CAAC4B,OAAO,CAAC;EAClFa,mBAAmB,CAACf,OAAO,CAACG,OAAO,CAAC;AACxC,CAAC;AAEDc,MAAM,CAACC,OAAO,GAAGxC,wBAAwB","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}