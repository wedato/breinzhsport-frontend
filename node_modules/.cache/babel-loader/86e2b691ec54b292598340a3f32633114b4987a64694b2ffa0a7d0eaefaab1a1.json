{"ast":null,"code":"import React,{useState,useContext}from\"react\";import{Link,useNavigate}from\"react-router-dom\";import{AuthContext}from\"../context/AuthContext\";import\"./RegisterPage.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const RegisterPage=()=>{const[formData,setFormData]=useState({email:\"\",password:\"\",confirmPassword:\"\",firstName:\"\",lastName:\"\"});const[error,setError]=useState(\"\");const[loading,setLoading]=useState(false);const[verificationStep,setVerificationStep]=useState(false);const[verificationCode,setVerificationCode]=useState(\"\");const{signUp,confirmSignUp}=useContext(AuthContext);const navigate=useNavigate();const handleChange=e=>{const{name,value}=e.target;setFormData(prev=>({...prev,[name]:value}));};const handleSubmit=async e=>{e.preventDefault();setError(\"\");setLoading(true);const{email,password,confirmPassword,firstName,lastName}=formData;if(password!==confirmPassword){setError(\"Les mots de passe ne correspondent pas.\");setLoading(false);return;}try{await signUp(email,password,{email,given_name:firstName,family_name:lastName});setVerificationStep(true);}catch(error){console.error(\"Erreur d'inscription:\",error);setError(error.message||\"Une erreur s'est produite lors de l'inscription.\");}finally{setLoading(false);}};const handleVerification=async e=>{e.preventDefault();setError(\"\");setLoading(true);try{await confirmSignUp(formData.email,verificationCode);alert(\"Inscription réussie ! Vous pouvez maintenant vous connecter.\");navigate(\"/login\");}catch(error){console.error(\"Erreur de vérification:\",error);setError(error.message||\"Une erreur s'est produite lors de la vérification du code.\");}finally{setLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"register-page\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"register-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:verificationStep?\"Vérification\":\"Créer un compte\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),!verificationStep?/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",name:\"email\",value:formData.email,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"firstName\",children:\"Pr\\xE9nom\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"firstName\",name:\"firstName\",value:formData.firstName,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"lastName\",children:\"Nom\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"lastName\",name:\"lastName\",value:formData.lastName,onChange:handleChange,required:true})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Mot de passe\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",name:\"password\",value:formData.password,onChange:handleChange,required:true,minLength:\"8\"}),/*#__PURE__*/_jsx(\"small\",{children:\"Le mot de passe doit contenir au moins 8 caract\\xE8res, incluant des lettres majuscules, minuscules et des chiffres.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"confirmPassword\",children:\"Confirmer le mot de passe\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"confirmPassword\",name:\"confirmPassword\",value:formData.confirmPassword,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn-primary\",disabled:loading,children:loading?\"Inscription en cours...\":\"S'inscrire\"})]}):/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleVerification,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"verificationCode\",children:\"Code de v\\xE9rification (envoy\\xE9 par email)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"verificationCode\",value:verificationCode,onChange:e=>setVerificationCode(e.target.value),required:true}),/*#__PURE__*/_jsx(\"small\",{children:\"Veuillez v\\xE9rifier votre bo\\xEEte de r\\xE9ception et entrer le code de v\\xE9rification que nous vous avons envoy\\xE9.\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn-primary\",disabled:loading,children:loading?\"Vérification en cours...\":\"Vérifier\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"register-footer\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Vous avez d\\xE9j\\xE0 un compte ? \",/*#__PURE__*/_jsx(Link,{to:\"/login\",children:\"Se connecter\"})]})})]})});};export default RegisterPage;","map":{"version":3,"names":["React","useState","useContext","Link","useNavigate","AuthContext","jsx","_jsx","jsxs","_jsxs","RegisterPage","formData","setFormData","email","password","confirmPassword","firstName","lastName","error","setError","loading","setLoading","verificationStep","setVerificationStep","verificationCode","setVerificationCode","signUp","confirmSignUp","navigate","handleChange","e","name","value","target","prev","handleSubmit","preventDefault","given_name","family_name","console","message","handleVerification","alert","className","children","onSubmit","htmlFor","type","id","onChange","required","minLength","disabled","to"],"sources":["C:/Users/jonat/aws_poc/frontend/src/pages/RegisterPage.js"],"sourcesContent":["import React, { useState, useContext } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { AuthContext } from \"../context/AuthContext\";\nimport \"./RegisterPage.css\";\n\nconst RegisterPage = () => {\n  const [formData, setFormData] = useState({\n    email: \"\",\n    password: \"\",\n    confirmPassword: \"\",\n    firstName: \"\",\n    lastName: \"\",\n  });\n  const [error, setError] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [verificationStep, setVerificationStep] = useState(false);\n  const [verificationCode, setVerificationCode] = useState(\"\");\n  const { signUp, confirmSignUp } = useContext(AuthContext);\n  const navigate = useNavigate();\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData((prev) => ({ ...prev, [name]: value }));\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError(\"\");\n    setLoading(true);\n\n    const { email, password, confirmPassword, firstName, lastName } = formData;\n\n    if (password !== confirmPassword) {\n      setError(\"Les mots de passe ne correspondent pas.\");\n      setLoading(false);\n      return;\n    }\n\n    try {\n      await signUp(email, password, {\n        email,\n        given_name: firstName,\n        family_name: lastName,\n      });\n      setVerificationStep(true);\n    } catch (error) {\n      console.error(\"Erreur d'inscription:\", error);\n      setError(\n        error.message || \"Une erreur s'est produite lors de l'inscription.\"\n      );\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleVerification = async (e) => {\n    e.preventDefault();\n    setError(\"\");\n    setLoading(true);\n\n    try {\n      await confirmSignUp(formData.email, verificationCode);\n      alert(\"Inscription réussie ! Vous pouvez maintenant vous connecter.\");\n      navigate(\"/login\");\n    } catch (error) {\n      console.error(\"Erreur de vérification:\", error);\n      setError(\n        error.message ||\n          \"Une erreur s'est produite lors de la vérification du code.\"\n      );\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"register-page\">\n      <div className=\"register-container\">\n        <h1>{verificationStep ? \"Vérification\" : \"Créer un compte\"}</h1>\n        {error && <div className=\"error-message\">{error}</div>}\n\n        {!verificationStep ? (\n          <form onSubmit={handleSubmit}>\n            <div className=\"form-group\">\n              <label htmlFor=\"email\">Email</label>\n              <input\n                type=\"email\"\n                id=\"email\"\n                name=\"email\"\n                value={formData.email}\n                onChange={handleChange}\n                required\n              />\n            </div>\n            <div className=\"form-row\">\n              <div className=\"form-group\">\n                <label htmlFor=\"firstName\">Prénom</label>\n                <input\n                  type=\"text\"\n                  id=\"firstName\"\n                  name=\"firstName\"\n                  value={formData.firstName}\n                  onChange={handleChange}\n                  required\n                />\n              </div>\n              <div className=\"form-group\">\n                <label htmlFor=\"lastName\">Nom</label>\n                <input\n                  type=\"text\"\n                  id=\"lastName\"\n                  name=\"lastName\"\n                  value={formData.lastName}\n                  onChange={handleChange}\n                  required\n                />\n              </div>\n            </div>\n            <div className=\"form-group\">\n              <label htmlFor=\"password\">Mot de passe</label>\n              <input\n                type=\"password\"\n                id=\"password\"\n                name=\"password\"\n                value={formData.password}\n                onChange={handleChange}\n                required\n                minLength=\"8\"\n              />\n              <small>\n                Le mot de passe doit contenir au moins 8 caractères, incluant\n                des lettres majuscules, minuscules et des chiffres.\n              </small>\n            </div>\n            <div className=\"form-group\">\n              <label htmlFor=\"confirmPassword\">Confirmer le mot de passe</label>\n              <input\n                type=\"password\"\n                id=\"confirmPassword\"\n                name=\"confirmPassword\"\n                value={formData.confirmPassword}\n                onChange={handleChange}\n                required\n              />\n            </div>\n            <button type=\"submit\" className=\"btn-primary\" disabled={loading}>\n              {loading ? \"Inscription en cours...\" : \"S'inscrire\"}\n            </button>\n          </form>\n        ) : (\n          <form onSubmit={handleVerification}>\n            <div className=\"form-group\">\n              <label htmlFor=\"verificationCode\">\n                Code de vérification (envoyé par email)\n              </label>\n              <input\n                type=\"text\"\n                id=\"verificationCode\"\n                value={verificationCode}\n                onChange={(e) => setVerificationCode(e.target.value)}\n                required\n              />\n              <small>\n                Veuillez vérifier votre boîte de réception et entrer le code de\n                vérification que nous vous avons envoyé.\n              </small>\n            </div>\n            <button type=\"submit\" className=\"btn-primary\" disabled={loading}>\n              {loading ? \"Vérification en cours...\" : \"Vérifier\"}\n            </button>\n          </form>\n        )}\n\n        <div className=\"register-footer\">\n          <p>\n            Vous avez déjà un compte ? <Link to=\"/login\">Se connecter</Link>\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default RegisterPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}