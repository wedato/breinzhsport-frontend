{"ast":null,"code":"import { __awaiter as t } from \"tslib\";\nimport { Hub as e } from \"aws-amplify\";\nimport { appendToCognitoUserAgent as n } from \"@aws-amplify/auth\";\nimport { waitFor as i } from \"xstate/lib/waitFor.js\";\nimport { ALLOWED_SPECIAL_CHARACTERS as a } from \"./constants.mjs\";\nimport { getActorState as o } from \"./actor.mjs\";\nimport { isFunction as s } from \"../../utils/index.mjs\";\nconst r = ({\n    packageName: t,\n    version: e\n  }) => {\n    n(`${t}/${e}`);\n  },\n  c = t => {\n    const e = t.trim().split(\"\");\n    for (let t = 0; t < e.length; t++) t > 0 && t < e.length - 1 && (e[t] = \"*\");\n    return e.join(\"\");\n  },\n  l = t => {\n    if (t.length < 4) return t;\n    const e = t.split(\"\");\n    for (let t = 0; t < e.length - 4; t++) e[t] = \"*\";\n    return e.join(\"\");\n  },\n  u = e => t(void 0, void 0, void 0, function* () {\n    try {\n      yield i(e, t => o(t).matches(\"autoSignIn\"));\n    } catch (t) {}\n  }),\n  m = ({\n    payload: {\n      data: e,\n      event: n\n    }\n  }, i, a) => t(void 0, void 0, void 0, function* () {\n    const {\n        send: t\n      } = i,\n      r = i.getSnapshot(),\n      {\n        onSignIn: c,\n        onSignOut: l\n      } = null != a ? a : {};\n    switch (n) {\n      case \"tokenRefresh\":\n        r.matches(\"authenticated.idle\") && t(\"TOKEN_REFRESH\");\n        break;\n      case \"autoSignIn\":\n        if (!r.matches(\"authenticated\")) {\n          yield u(i);\n          const n = o(i.getSnapshot());\n          (null == n ? void 0 : n.matches(\"autoSignIn\")) && t({\n            type: \"AUTO_SIGN_IN\",\n            data: e\n          });\n        }\n        break;\n      case \"autoSignIn_failure\":\n        {\n          yield u(i);\n          const n = o(i.getSnapshot());\n          (null == n ? void 0 : n.matches(\"autoSignIn\")) && t({\n            type: \"AUTO_SIGN_IN_FAILURE\",\n            data: e\n          });\n          break;\n        }\n      case \"signIn\":\n        s(c) && c();\n        break;\n      case \"signOut\":\n      case \"tokenRefresh_failure\":\n        s(l) && l(), r.matches(\"authenticated.idle\") && t(\"SIGN_OUT\");\n    }\n  }),\n  d = (t, n = m) => e.listen(\"auth\", ((t, e) => n => {\n    e(n, t);\n  })(t, n), \"authenticator-hub-handler\"),\n  h = t => a.some(e => t.includes(e)),\n  p = (t, e, n) => encodeURI(`otpauth://totp/${t}:${e}?secret=${n}&issuer=${t}`);\nfunction f(t, ...e) {\n  return Object.entries(t).reduce((t, [n, i]) => Object.assign(Object.assign({}, t), {\n    [n]: e.includes(n) ? i : null == i ? void 0 : i.trim()\n  }), {});\n}\nexport { c as censorAllButFirstAndLast, l as censorPhoneNumber, r as configureComponent, m as defaultAuthHubHandler, p as getTotpCodeURL, h as hasSpecialChars, d as listenToAuthHub, f as trimValues };","map":{"version":3,"names":["__awaiter","t","Hub","e","appendToCognitoUserAgent","n","waitFor","i","ALLOWED_SPECIAL_CHARACTERS","a","getActorState","o","isFunction","s","r","packageName","version","c","trim","split","length","join","l","u","matches","m","payload","data","event","send","getSnapshot","onSignIn","onSignOut","type","d","listen","h","some","includes","p","encodeURI","f","Object","entries","reduce","assign","censorAllButFirstAndLast","censorPhoneNumber","configureComponent","defaultAuthHubHandler","getTotpCodeURL","hasSpecialChars","listenToAuthHub","trimValues"],"sources":["C:/Users/jonat/aws_poc/frontend/node_modules/@aws-amplify/ui/dist/esm/helpers/authenticator/utils.mjs"],"sourcesContent":["import{__awaiter as t}from\"tslib\";import{Hub as e}from\"aws-amplify\";import{appendToCognitoUserAgent as n}from\"@aws-amplify/auth\";import{waitFor as i}from\"xstate/lib/waitFor.js\";import{ALLOWED_SPECIAL_CHARACTERS as a}from\"./constants.mjs\";import{getActorState as o}from\"./actor.mjs\";import{isFunction as s}from\"../../utils/index.mjs\";const r=({packageName:t,version:e})=>{n(`${t}/${e}`)},c=t=>{const e=t.trim().split(\"\");for(let t=0;t<e.length;t++)t>0&&t<e.length-1&&(e[t]=\"*\");return e.join(\"\")},l=t=>{if(t.length<4)return t;const e=t.split(\"\");for(let t=0;t<e.length-4;t++)e[t]=\"*\";return e.join(\"\")},u=e=>t(void 0,void 0,void 0,(function*(){try{yield i(e,(t=>o(t).matches(\"autoSignIn\")))}catch(t){}})),m=({payload:{data:e,event:n}},i,a)=>t(void 0,void 0,void 0,(function*(){const{send:t}=i,r=i.getSnapshot(),{onSignIn:c,onSignOut:l}=null!=a?a:{};switch(n){case\"tokenRefresh\":r.matches(\"authenticated.idle\")&&t(\"TOKEN_REFRESH\");break;case\"autoSignIn\":if(!r.matches(\"authenticated\")){yield u(i);const n=o(i.getSnapshot());(null==n?void 0:n.matches(\"autoSignIn\"))&&t({type:\"AUTO_SIGN_IN\",data:e})}break;case\"autoSignIn_failure\":{yield u(i);const n=o(i.getSnapshot());(null==n?void 0:n.matches(\"autoSignIn\"))&&t({type:\"AUTO_SIGN_IN_FAILURE\",data:e});break}case\"signIn\":s(c)&&c();break;case\"signOut\":case\"tokenRefresh_failure\":s(l)&&l(),r.matches(\"authenticated.idle\")&&t(\"SIGN_OUT\")}})),d=(t,n=m)=>e.listen(\"auth\",((t,e)=>n=>{e(n,t)})(t,n),\"authenticator-hub-handler\"),h=t=>a.some((e=>t.includes(e))),p=(t,e,n)=>encodeURI(`otpauth://totp/${t}:${e}?secret=${n}&issuer=${t}`);function f(t,...e){return Object.entries(t).reduce(((t,[n,i])=>Object.assign(Object.assign({},t),{[n]:e.includes(n)?i:null==i?void 0:i.trim()})),{})}export{c as censorAllButFirstAndLast,l as censorPhoneNumber,r as configureComponent,m as defaultAuthHubHandler,p as getTotpCodeURL,h as hasSpecialChars,d as listenToAuthHub,f as trimValues};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}