{"ast":null,"code":"import React,{createContext,useState,useEffect}from\"react\";import{Auth}from\"aws-amplify\";import{jsx as _jsx}from\"react/jsx-runtime\";export const AuthContext=/*#__PURE__*/createContext();export const AuthProvider=_ref=>{let{children,value}=_ref;const[isAuthenticated,setIsAuthenticated]=useState((value===null||value===void 0?void 0:value.isAuthenticated)||false);const[user,setUser]=useState((value===null||value===void 0?void 0:value.user)||null);const[loading,setLoading]=useState(true);const checkAuthState=async()=>{try{const user=await Auth.currentAuthenticatedUser();setIsAuthenticated(true);setUser(user);return user;}catch(error){setIsAuthenticated(false);setUser(null);return null;}finally{setLoading(false);}};useEffect(()=>{checkAuthState();},[]);useEffect(()=>{if(value){setIsAuthenticated(value.isAuthenticated);setUser(value.user);setLoading(false);}},[value]);const signIn=async(email,password)=>{try{const user=await Auth.signIn(email,password);setIsAuthenticated(true);setUser(user);return user;}catch(error){console.error(\"Erreur lors de la connexion:\",error);throw error;}};const signUp=async(email,password,attributes)=>{try{const result=await Auth.signUp({username:email,password,attributes});return result;}catch(error){console.error(\"Erreur lors de l'inscription:\",error);throw error;}};const confirmSignUp=async(email,code)=>{try{return await Auth.confirmSignUp(email,code);}catch(error){console.error(\"Erreur lors de la confirmation de l'inscription:\",error);throw error;}};const signOut=async()=>{try{await Auth.signOut();setIsAuthenticated(false);setUser(null);}catch(error){console.error(\"Erreur lors de la déconnexion:\",error);}};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{isAuthenticated,user,loading,checkAuthState,signIn,signUp,confirmSignUp,signOut},children:children});};","map":{"version":3,"names":["React","createContext","useState","useEffect","Auth","jsx","_jsx","AuthContext","AuthProvider","_ref","children","value","isAuthenticated","setIsAuthenticated","user","setUser","loading","setLoading","checkAuthState","currentAuthenticatedUser","error","signIn","email","password","console","signUp","attributes","result","username","confirmSignUp","code","signOut","Provider"],"sources":["C:/Users/jonat/aws_poc/frontend/src/context/AuthContext.js"],"sourcesContent":["import React, { createContext, useState, useEffect } from \"react\";\nimport { Auth } from \"aws-amplify\";\n\nexport const AuthContext = createContext();\n\nexport const AuthProvider = ({ children, value }) => {\n  const [isAuthenticated, setIsAuthenticated] = useState(\n    value?.isAuthenticated || false\n  );\n  const [user, setUser] = useState(value?.user || null);\n  const [loading, setLoading] = useState(true);\n\n  const checkAuthState = async () => {\n    try {\n      const user = await Auth.currentAuthenticatedUser();\n      setIsAuthenticated(true);\n      setUser(user);\n      return user;\n    } catch (error) {\n      setIsAuthenticated(false);\n      setUser(null);\n      return null;\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    checkAuthState();\n  }, []);\n\n  useEffect(() => {\n    if (value) {\n      setIsAuthenticated(value.isAuthenticated);\n      setUser(value.user);\n      setLoading(false);\n    }\n  }, [value]);\n\n  const signIn = async (email, password) => {\n    try {\n      const user = await Auth.signIn(email, password);\n      setIsAuthenticated(true);\n      setUser(user);\n      return user;\n    } catch (error) {\n      console.error(\"Erreur lors de la connexion:\", error);\n      throw error;\n    }\n  };\n\n  const signUp = async (email, password, attributes) => {\n    try {\n      const result = await Auth.signUp({\n        username: email,\n        password,\n        attributes,\n      });\n      return result;\n    } catch (error) {\n      console.error(\"Erreur lors de l'inscription:\", error);\n      throw error;\n    }\n  };\n\n  const confirmSignUp = async (email, code) => {\n    try {\n      return await Auth.confirmSignUp(email, code);\n    } catch (error) {\n      console.error(\"Erreur lors de la confirmation de l'inscription:\", error);\n      throw error;\n    }\n  };\n\n  const signOut = async () => {\n    try {\n      await Auth.signOut();\n      setIsAuthenticated(false);\n      setUser(null);\n    } catch (error) {\n      console.error(\"Erreur lors de la déconnexion:\", error);\n    }\n  };\n\n  return (\n    <AuthContext.Provider\n      value={{\n        isAuthenticated,\n        user,\n        loading,\n        checkAuthState,\n        signIn,\n        signUp,\n        confirmSignUp,\n        signOut,\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}