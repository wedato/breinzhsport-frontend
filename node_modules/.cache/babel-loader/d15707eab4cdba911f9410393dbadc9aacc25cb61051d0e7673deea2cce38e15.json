{"ast":null,"code":"import * as CommonSelectors from '../lib/common_selectors.js';\nimport mouseEventPoint from '../lib/mouse_event_point.js';\nimport createSupplementaryPoints from '../lib/create_supplementary_points.js';\nimport StringSet from '../lib/string_set.js';\nimport doubleClickZoom from '../lib/double_click_zoom.js';\nimport moveFeatures from '../lib/move_features.js';\nimport * as Constants from '../constants.js';\nconst SimpleSelect = {};\nSimpleSelect.onSetup = function (opts) {\n  // turn the opts into state.\n  const state = {\n    dragMoveLocation: null,\n    boxSelectStartLocation: null,\n    boxSelectElement: undefined,\n    boxSelecting: false,\n    canBoxSelect: false,\n    dragMoving: false,\n    canDragMove: false,\n    initialDragPanState: this.map.dragPan.isEnabled(),\n    initiallySelectedFeatureIds: opts.featureIds || []\n  };\n  this.setSelected(state.initiallySelectedFeatureIds.filter(id => this.getFeature(id) !== undefined));\n  this.fireActionable();\n  this.setActionableState({\n    combineFeatures: true,\n    uncombineFeatures: true,\n    trash: true\n  });\n  return state;\n};\nSimpleSelect.fireUpdate = function () {\n  this.fire(Constants.events.UPDATE, {\n    action: Constants.updateActions.MOVE,\n    features: this.getSelected().map(f => f.toGeoJSON())\n  });\n};\nSimpleSelect.fireActionable = function () {\n  const selectedFeatures = this.getSelected();\n  const multiFeatures = selectedFeatures.filter(feature => this.isInstanceOf('MultiFeature', feature));\n  let combineFeatures = false;\n  if (selectedFeatures.length > 1) {\n    combineFeatures = true;\n    const featureType = selectedFeatures[0].type.replace('Multi', '');\n    selectedFeatures.forEach(feature => {\n      if (feature.type.replace('Multi', '') !== featureType) {\n        combineFeatures = false;\n      }\n    });\n  }\n  const uncombineFeatures = multiFeatures.length > 0;\n  const trash = selectedFeatures.length > 0;\n  this.setActionableState({\n    combineFeatures,\n    uncombineFeatures,\n    trash\n  });\n};\nSimpleSelect.getUniqueIds = function (allFeatures) {\n  if (!allFeatures.length) return [];\n  const ids = allFeatures.map(s => s.properties.id).filter(id => id !== undefined).reduce((memo, id) => {\n    memo.add(id);\n    return memo;\n  }, new StringSet());\n  return ids.values();\n};\nSimpleSelect.stopExtendedInteractions = function (state) {\n  if (state.boxSelectElement) {\n    if (state.boxSelectElement.parentNode) state.boxSelectElement.parentNode.removeChild(state.boxSelectElement);\n    state.boxSelectElement = null;\n  }\n  if ((state.canDragMove || state.canBoxSelect) && state.initialDragPanState === true) {\n    this.map.dragPan.enable();\n  }\n  state.boxSelecting = false;\n  state.canBoxSelect = false;\n  state.dragMoving = false;\n  state.canDragMove = false;\n};\nSimpleSelect.onStop = function () {\n  doubleClickZoom.enable(this);\n};\nSimpleSelect.onMouseMove = function (state, e) {\n  const isFeature = CommonSelectors.isFeature(e);\n  if (isFeature && state.dragMoving) this.fireUpdate();\n\n  // On mousemove that is not a drag, stop extended interactions.\n  // This is useful if you drag off the canvas, release the button,\n  // then move the mouse back over the canvas --- we don't allow the\n  // interaction to continue then, but we do let it continue if you held\n  // the mouse button that whole time\n  this.stopExtendedInteractions(state);\n\n  // Skip render\n  return true;\n};\nSimpleSelect.onMouseOut = function (state) {\n  // As soon as you mouse leaves the canvas, update the feature\n  if (state.dragMoving) return this.fireUpdate();\n\n  // Skip render\n  return true;\n};\nSimpleSelect.onTap = SimpleSelect.onClick = function (state, e) {\n  // Click (with or without shift) on no feature\n  if (CommonSelectors.noTarget(e)) return this.clickAnywhere(state, e); // also tap\n  if (CommonSelectors.isOfMetaType(Constants.meta.VERTEX)(e)) return this.clickOnVertex(state, e); //tap\n  if (CommonSelectors.isFeature(e)) return this.clickOnFeature(state, e);\n};\nSimpleSelect.clickAnywhere = function (state) {\n  // Clear the re-render selection\n  const wasSelected = this.getSelectedIds();\n  if (wasSelected.length) {\n    this.clearSelectedFeatures();\n    wasSelected.forEach(id => this.doRender(id));\n  }\n  doubleClickZoom.enable(this);\n  this.stopExtendedInteractions(state);\n};\nSimpleSelect.clickOnVertex = function (state, e) {\n  // Enter direct select mode\n  this.changeMode(Constants.modes.DIRECT_SELECT, {\n    featureId: e.featureTarget.properties.parent,\n    coordPath: e.featureTarget.properties.coord_path,\n    startPos: e.lngLat\n  });\n  this.updateUIClasses({\n    mouse: Constants.cursors.MOVE\n  });\n};\nSimpleSelect.startOnActiveFeature = function (state, e) {\n  // Stop any already-underway extended interactions\n  this.stopExtendedInteractions(state);\n\n  // Disable map.dragPan immediately so it can't start\n  this.map.dragPan.disable();\n\n  // Re-render it and enable drag move\n  this.doRender(e.featureTarget.properties.id);\n\n  // Set up the state for drag moving\n  state.canDragMove = true;\n  state.dragMoveLocation = e.lngLat;\n};\nSimpleSelect.clickOnFeature = function (state, e) {\n  // Stop everything\n  doubleClickZoom.disable(this);\n  this.stopExtendedInteractions(state);\n  const isShiftClick = CommonSelectors.isShiftDown(e);\n  const selectedFeatureIds = this.getSelectedIds();\n  const featureId = e.featureTarget.properties.id;\n  const isFeatureSelected = this.isSelected(featureId);\n\n  // Click (without shift) on any selected feature but a point\n  if (!isShiftClick && isFeatureSelected && this.getFeature(featureId).type !== Constants.geojsonTypes.POINT) {\n    // Enter direct select mode\n    return this.changeMode(Constants.modes.DIRECT_SELECT, {\n      featureId\n    });\n  }\n\n  // Shift-click on a selected feature\n  if (isFeatureSelected && isShiftClick) {\n    // Deselect it\n    this.deselect(featureId);\n    this.updateUIClasses({\n      mouse: Constants.cursors.POINTER\n    });\n    if (selectedFeatureIds.length === 1) {\n      doubleClickZoom.enable(this);\n    }\n    // Shift-click on an unselected feature\n  } else if (!isFeatureSelected && isShiftClick) {\n    // Add it to the selection\n    this.select(featureId);\n    this.updateUIClasses({\n      mouse: Constants.cursors.MOVE\n    });\n    // Click (without shift) on an unselected feature\n  } else if (!isFeatureSelected && !isShiftClick) {\n    // Make it the only selected feature\n    selectedFeatureIds.forEach(id => this.doRender(id));\n    this.setSelected(featureId);\n    this.updateUIClasses({\n      mouse: Constants.cursors.MOVE\n    });\n  }\n\n  // No matter what, re-render the clicked feature\n  this.doRender(featureId);\n};\nSimpleSelect.onMouseDown = function (state, e) {\n  state.initialDragPanState = this.map.dragPan.isEnabled();\n  if (CommonSelectors.isActiveFeature(e)) return this.startOnActiveFeature(state, e);\n  if (this.drawConfig.boxSelect && CommonSelectors.isShiftMousedown(e)) return this.startBoxSelect(state, e);\n};\nSimpleSelect.startBoxSelect = function (state, e) {\n  this.stopExtendedInteractions(state);\n  this.map.dragPan.disable();\n  // Enable box select\n  state.boxSelectStartLocation = mouseEventPoint(e.originalEvent, this.map.getContainer());\n  state.canBoxSelect = true;\n};\nSimpleSelect.onTouchStart = function (state, e) {\n  if (CommonSelectors.isActiveFeature(e)) return this.startOnActiveFeature(state, e);\n};\nSimpleSelect.onDrag = function (state, e) {\n  if (state.canDragMove) return this.dragMove(state, e);\n  if (this.drawConfig.boxSelect && state.canBoxSelect) return this.whileBoxSelect(state, e);\n};\nSimpleSelect.whileBoxSelect = function (state, e) {\n  state.boxSelecting = true;\n  this.updateUIClasses({\n    mouse: Constants.cursors.ADD\n  });\n\n  // Create the box node if it doesn't exist\n  if (!state.boxSelectElement) {\n    state.boxSelectElement = document.createElement('div');\n    state.boxSelectElement.classList.add(Constants.classes.BOX_SELECT);\n    this.map.getContainer().appendChild(state.boxSelectElement);\n  }\n\n  // Adjust the box node's width and xy position\n  const current = mouseEventPoint(e.originalEvent, this.map.getContainer());\n  const minX = Math.min(state.boxSelectStartLocation.x, current.x);\n  const maxX = Math.max(state.boxSelectStartLocation.x, current.x);\n  const minY = Math.min(state.boxSelectStartLocation.y, current.y);\n  const maxY = Math.max(state.boxSelectStartLocation.y, current.y);\n  const translateValue = `translate(${minX}px, ${minY}px)`;\n  state.boxSelectElement.style.transform = translateValue;\n  state.boxSelectElement.style.WebkitTransform = translateValue;\n  state.boxSelectElement.style.width = `${maxX - minX}px`;\n  state.boxSelectElement.style.height = `${maxY - minY}px`;\n};\nSimpleSelect.dragMove = function (state, e) {\n  // Dragging when drag move is enabled\n  state.dragMoving = true;\n  e.originalEvent.stopPropagation();\n  const delta = {\n    lng: e.lngLat.lng - state.dragMoveLocation.lng,\n    lat: e.lngLat.lat - state.dragMoveLocation.lat\n  };\n  moveFeatures(this.getSelected(), delta);\n  state.dragMoveLocation = e.lngLat;\n};\nSimpleSelect.onTouchEnd = SimpleSelect.onMouseUp = function (state, e) {\n  // End any extended interactions\n  if (state.dragMoving) {\n    this.fireUpdate();\n  } else if (state.boxSelecting) {\n    const bbox = [state.boxSelectStartLocation, mouseEventPoint(e.originalEvent, this.map.getContainer())];\n    const featuresInBox = this.featuresAt(null, bbox, 'click');\n    const idsToSelect = this.getUniqueIds(featuresInBox).filter(id => !this.isSelected(id));\n    if (idsToSelect.length) {\n      this.select(idsToSelect);\n      idsToSelect.forEach(id => this.doRender(id));\n      this.updateUIClasses({\n        mouse: Constants.cursors.MOVE\n      });\n    }\n  }\n  this.stopExtendedInteractions(state);\n};\nSimpleSelect.toDisplayFeatures = function (state, geojson, display) {\n  geojson.properties.active = this.isSelected(geojson.properties.id) ? Constants.activeStates.ACTIVE : Constants.activeStates.INACTIVE;\n  display(geojson);\n  this.fireActionable();\n  if (geojson.properties.active !== Constants.activeStates.ACTIVE || geojson.geometry.type === Constants.geojsonTypes.POINT) return;\n  createSupplementaryPoints(geojson).forEach(display);\n};\nSimpleSelect.onTrash = function () {\n  this.deleteFeature(this.getSelectedIds());\n  this.fireActionable();\n};\nSimpleSelect.onCombineFeatures = function () {\n  const selectedFeatures = this.getSelected();\n  if (selectedFeatures.length === 0 || selectedFeatures.length < 2) return;\n  const coordinates = [],\n    featuresCombined = [];\n  const featureType = selectedFeatures[0].type.replace('Multi', '');\n  for (let i = 0; i < selectedFeatures.length; i++) {\n    const feature = selectedFeatures[i];\n    if (feature.type.replace('Multi', '') !== featureType) {\n      return;\n    }\n    if (feature.type.includes('Multi')) {\n      feature.getCoordinates().forEach(subcoords => {\n        coordinates.push(subcoords);\n      });\n    } else {\n      coordinates.push(feature.getCoordinates());\n    }\n    featuresCombined.push(feature.toGeoJSON());\n  }\n  if (featuresCombined.length > 1) {\n    const multiFeature = this.newFeature({\n      type: Constants.geojsonTypes.FEATURE,\n      properties: featuresCombined[0].properties,\n      geometry: {\n        type: `Multi${featureType}`,\n        coordinates\n      }\n    });\n    this.addFeature(multiFeature);\n    this.deleteFeature(this.getSelectedIds(), {\n      silent: true\n    });\n    this.setSelected([multiFeature.id]);\n    this.fire(Constants.events.COMBINE_FEATURES, {\n      createdFeatures: [multiFeature.toGeoJSON()],\n      deletedFeatures: featuresCombined\n    });\n  }\n  this.fireActionable();\n};\nSimpleSelect.onUncombineFeatures = function () {\n  const selectedFeatures = this.getSelected();\n  if (selectedFeatures.length === 0) return;\n  const createdFeatures = [];\n  const featuresUncombined = [];\n  for (let i = 0; i < selectedFeatures.length; i++) {\n    const feature = selectedFeatures[i];\n    if (this.isInstanceOf('MultiFeature', feature)) {\n      feature.getFeatures().forEach(subFeature => {\n        this.addFeature(subFeature);\n        subFeature.properties = feature.properties;\n        createdFeatures.push(subFeature.toGeoJSON());\n        this.select([subFeature.id]);\n      });\n      this.deleteFeature(feature.id, {\n        silent: true\n      });\n      featuresUncombined.push(feature.toGeoJSON());\n    }\n  }\n  if (createdFeatures.length > 1) {\n    this.fire(Constants.events.UNCOMBINE_FEATURES, {\n      createdFeatures,\n      deletedFeatures: featuresUncombined\n    });\n  }\n  this.fireActionable();\n};\nexport default SimpleSelect;","map":{"version":3,"names":["CommonSelectors","mouseEventPoint","createSupplementaryPoints","StringSet","doubleClickZoom","moveFeatures","Constants","SimpleSelect","onSetup","opts","state","dragMoveLocation","boxSelectStartLocation","boxSelectElement","undefined","boxSelecting","canBoxSelect","dragMoving","canDragMove","initialDragPanState","map","dragPan","isEnabled","initiallySelectedFeatureIds","featureIds","setSelected","filter","id","getFeature","fireActionable","setActionableState","combineFeatures","uncombineFeatures","trash","fireUpdate","fire","events","UPDATE","action","updateActions","MOVE","features","getSelected","f","toGeoJSON","selectedFeatures","multiFeatures","feature","isInstanceOf","length","featureType","type","replace","forEach","getUniqueIds","allFeatures","ids","s","properties","reduce","memo","add","values","stopExtendedInteractions","parentNode","removeChild","enable","onStop","onMouseMove","e","isFeature","onMouseOut","onTap","onClick","noTarget","clickAnywhere","isOfMetaType","meta","VERTEX","clickOnVertex","clickOnFeature","wasSelected","getSelectedIds","clearSelectedFeatures","doRender","changeMode","modes","DIRECT_SELECT","featureId","featureTarget","parent","coordPath","coord_path","startPos","lngLat","updateUIClasses","mouse","cursors","startOnActiveFeature","disable","isShiftClick","isShiftDown","selectedFeatureIds","isFeatureSelected","isSelected","geojsonTypes","POINT","deselect","POINTER","select","onMouseDown","isActiveFeature","drawConfig","boxSelect","isShiftMousedown","startBoxSelect","originalEvent","getContainer","onTouchStart","onDrag","dragMove","whileBoxSelect","ADD","document","createElement","classList","classes","BOX_SELECT","appendChild","current","minX","Math","min","x","maxX","max","minY","y","maxY","translateValue","style","transform","WebkitTransform","width","height","stopPropagation","delta","lng","lat","onTouchEnd","onMouseUp","bbox","featuresInBox","featuresAt","idsToSelect","toDisplayFeatures","geojson","display","active","activeStates","ACTIVE","INACTIVE","geometry","onTrash","deleteFeature","onCombineFeatures","coordinates","featuresCombined","i","includes","getCoordinates","subcoords","push","multiFeature","newFeature","FEATURE","addFeature","silent","COMBINE_FEATURES","createdFeatures","deletedFeatures","onUncombineFeatures","featuresUncombined","getFeatures","subFeature","UNCOMBINE_FEATURES"],"sources":["C:/Users/jonat/aws_poc/frontend/node_modules/@mapbox/mapbox-gl-draw/src/modes/simple_select.js"],"sourcesContent":["import * as CommonSelectors from '../lib/common_selectors.js';\nimport mouseEventPoint from '../lib/mouse_event_point.js';\nimport createSupplementaryPoints from '../lib/create_supplementary_points.js';\nimport StringSet from '../lib/string_set.js';\nimport doubleClickZoom from '../lib/double_click_zoom.js';\nimport moveFeatures from '../lib/move_features.js';\nimport * as Constants from '../constants.js';\n\nconst SimpleSelect = {};\n\nSimpleSelect.onSetup = function(opts) {\n  // turn the opts into state.\n  const state = {\n    dragMoveLocation: null,\n    boxSelectStartLocation: null,\n    boxSelectElement: undefined,\n    boxSelecting: false,\n    canBoxSelect: false,\n    dragMoving: false,\n    canDragMove: false,\n    initialDragPanState: this.map.dragPan.isEnabled(),\n    initiallySelectedFeatureIds: opts.featureIds || []\n  };\n\n  this.setSelected(state.initiallySelectedFeatureIds.filter(id => this.getFeature(id) !== undefined));\n  this.fireActionable();\n\n  this.setActionableState({\n    combineFeatures: true,\n    uncombineFeatures: true,\n    trash: true\n  });\n\n  return state;\n};\n\nSimpleSelect.fireUpdate = function() {\n  this.fire(Constants.events.UPDATE, {\n    action: Constants.updateActions.MOVE,\n    features: this.getSelected().map(f => f.toGeoJSON())\n  });\n};\n\nSimpleSelect.fireActionable = function() {\n  const selectedFeatures = this.getSelected();\n\n  const multiFeatures = selectedFeatures.filter(\n    feature => this.isInstanceOf('MultiFeature', feature)\n  );\n\n  let combineFeatures = false;\n\n  if (selectedFeatures.length > 1) {\n    combineFeatures = true;\n    const featureType = selectedFeatures[0].type.replace('Multi', '');\n    selectedFeatures.forEach((feature) => {\n      if (feature.type.replace('Multi', '') !== featureType) {\n        combineFeatures = false;\n      }\n    });\n  }\n\n  const uncombineFeatures = multiFeatures.length > 0;\n  const trash = selectedFeatures.length > 0;\n\n  this.setActionableState({\n    combineFeatures, uncombineFeatures, trash\n  });\n};\n\nSimpleSelect.getUniqueIds = function(allFeatures) {\n  if (!allFeatures.length) return [];\n  const ids = allFeatures.map(s => s.properties.id)\n    .filter(id => id !== undefined)\n    .reduce((memo, id) => {\n      memo.add(id);\n      return memo;\n    }, new StringSet());\n\n  return ids.values();\n};\n\nSimpleSelect.stopExtendedInteractions = function(state) {\n  if (state.boxSelectElement) {\n    if (state.boxSelectElement.parentNode) state.boxSelectElement.parentNode.removeChild(state.boxSelectElement);\n    state.boxSelectElement = null;\n  }\n\n  if ((state.canDragMove || state.canBoxSelect) && state.initialDragPanState === true) {\n    this.map.dragPan.enable();\n  }\n\n  state.boxSelecting = false;\n  state.canBoxSelect = false;\n  state.dragMoving = false;\n  state.canDragMove = false;\n};\n\nSimpleSelect.onStop = function() {\n  doubleClickZoom.enable(this);\n};\n\nSimpleSelect.onMouseMove = function(state, e) {\n  const isFeature = CommonSelectors.isFeature(e);\n  if (isFeature && state.dragMoving) this.fireUpdate();\n\n  // On mousemove that is not a drag, stop extended interactions.\n  // This is useful if you drag off the canvas, release the button,\n  // then move the mouse back over the canvas --- we don't allow the\n  // interaction to continue then, but we do let it continue if you held\n  // the mouse button that whole time\n  this.stopExtendedInteractions(state);\n\n  // Skip render\n  return true;\n};\n\nSimpleSelect.onMouseOut = function(state) {\n  // As soon as you mouse leaves the canvas, update the feature\n  if (state.dragMoving) return this.fireUpdate();\n\n  // Skip render\n  return true;\n};\n\nSimpleSelect.onTap = SimpleSelect.onClick = function(state, e) {\n  // Click (with or without shift) on no feature\n  if (CommonSelectors.noTarget(e)) return this.clickAnywhere(state, e); // also tap\n  if (CommonSelectors.isOfMetaType(Constants.meta.VERTEX)(e)) return this.clickOnVertex(state, e); //tap\n  if (CommonSelectors.isFeature(e)) return this.clickOnFeature(state, e);\n};\n\nSimpleSelect.clickAnywhere = function (state) {\n  // Clear the re-render selection\n  const wasSelected = this.getSelectedIds();\n  if (wasSelected.length) {\n    this.clearSelectedFeatures();\n    wasSelected.forEach(id => this.doRender(id));\n  }\n  doubleClickZoom.enable(this);\n  this.stopExtendedInteractions(state);\n};\n\nSimpleSelect.clickOnVertex = function(state, e) {\n  // Enter direct select mode\n  this.changeMode(Constants.modes.DIRECT_SELECT, {\n    featureId: e.featureTarget.properties.parent,\n    coordPath: e.featureTarget.properties.coord_path,\n    startPos: e.lngLat\n  });\n  this.updateUIClasses({ mouse: Constants.cursors.MOVE });\n};\n\nSimpleSelect.startOnActiveFeature = function(state, e) {\n  // Stop any already-underway extended interactions\n  this.stopExtendedInteractions(state);\n\n  // Disable map.dragPan immediately so it can't start\n  this.map.dragPan.disable();\n\n  // Re-render it and enable drag move\n  this.doRender(e.featureTarget.properties.id);\n\n  // Set up the state for drag moving\n  state.canDragMove = true;\n  state.dragMoveLocation = e.lngLat;\n};\n\nSimpleSelect.clickOnFeature = function(state, e) {\n  // Stop everything\n  doubleClickZoom.disable(this);\n  this.stopExtendedInteractions(state);\n\n  const isShiftClick = CommonSelectors.isShiftDown(e);\n  const selectedFeatureIds = this.getSelectedIds();\n  const featureId = e.featureTarget.properties.id;\n  const isFeatureSelected = this.isSelected(featureId);\n\n  // Click (without shift) on any selected feature but a point\n  if (!isShiftClick && isFeatureSelected && this.getFeature(featureId).type !== Constants.geojsonTypes.POINT) {\n    // Enter direct select mode\n    return this.changeMode(Constants.modes.DIRECT_SELECT, {\n      featureId\n    });\n  }\n\n  // Shift-click on a selected feature\n  if (isFeatureSelected && isShiftClick) {\n    // Deselect it\n    this.deselect(featureId);\n    this.updateUIClasses({ mouse: Constants.cursors.POINTER });\n    if (selectedFeatureIds.length === 1) {\n      doubleClickZoom.enable(this);\n    }\n  // Shift-click on an unselected feature\n  } else if (!isFeatureSelected && isShiftClick) {\n    // Add it to the selection\n    this.select(featureId);\n    this.updateUIClasses({ mouse: Constants.cursors.MOVE });\n  // Click (without shift) on an unselected feature\n  } else if (!isFeatureSelected && !isShiftClick) {\n    // Make it the only selected feature\n    selectedFeatureIds.forEach(id => this.doRender(id));\n    this.setSelected(featureId);\n    this.updateUIClasses({ mouse: Constants.cursors.MOVE });\n  }\n\n  // No matter what, re-render the clicked feature\n  this.doRender(featureId);\n};\n\nSimpleSelect.onMouseDown = function(state, e) {\n  state.initialDragPanState = this.map.dragPan.isEnabled();\n  if (CommonSelectors.isActiveFeature(e)) return this.startOnActiveFeature(state, e);\n  if (this.drawConfig.boxSelect && CommonSelectors.isShiftMousedown(e)) return this.startBoxSelect(state, e);\n};\n\nSimpleSelect.startBoxSelect = function(state, e) {\n  this.stopExtendedInteractions(state);\n  this.map.dragPan.disable();\n  // Enable box select\n  state.boxSelectStartLocation = mouseEventPoint(e.originalEvent, this.map.getContainer());\n  state.canBoxSelect = true;\n};\n\nSimpleSelect.onTouchStart = function(state, e) {\n  if (CommonSelectors.isActiveFeature(e)) return this.startOnActiveFeature(state, e);\n};\n\nSimpleSelect.onDrag = function(state, e) {\n  if (state.canDragMove) return this.dragMove(state, e);\n  if (this.drawConfig.boxSelect && state.canBoxSelect) return this.whileBoxSelect(state, e);\n};\n\nSimpleSelect.whileBoxSelect = function(state, e) {\n  state.boxSelecting = true;\n  this.updateUIClasses({ mouse: Constants.cursors.ADD });\n\n  // Create the box node if it doesn't exist\n  if (!state.boxSelectElement) {\n    state.boxSelectElement = document.createElement('div');\n    state.boxSelectElement.classList.add(Constants.classes.BOX_SELECT);\n    this.map.getContainer().appendChild(state.boxSelectElement);\n  }\n\n  // Adjust the box node's width and xy position\n  const current = mouseEventPoint(e.originalEvent, this.map.getContainer());\n  const minX = Math.min(state.boxSelectStartLocation.x, current.x);\n  const maxX = Math.max(state.boxSelectStartLocation.x, current.x);\n  const minY = Math.min(state.boxSelectStartLocation.y, current.y);\n  const maxY = Math.max(state.boxSelectStartLocation.y, current.y);\n  const translateValue = `translate(${minX}px, ${minY}px)`;\n  state.boxSelectElement.style.transform = translateValue;\n  state.boxSelectElement.style.WebkitTransform = translateValue;\n  state.boxSelectElement.style.width = `${maxX - minX}px`;\n  state.boxSelectElement.style.height = `${maxY - minY}px`;\n};\n\nSimpleSelect.dragMove = function(state, e) {\n  // Dragging when drag move is enabled\n  state.dragMoving = true;\n  e.originalEvent.stopPropagation();\n\n  const delta = {\n    lng: e.lngLat.lng - state.dragMoveLocation.lng,\n    lat: e.lngLat.lat - state.dragMoveLocation.lat\n  };\n\n  moveFeatures(this.getSelected(), delta);\n\n  state.dragMoveLocation = e.lngLat;\n};\n\nSimpleSelect.onTouchEnd = SimpleSelect.onMouseUp = function(state, e) {\n  // End any extended interactions\n  if (state.dragMoving) {\n    this.fireUpdate();\n  } else if (state.boxSelecting) {\n    const bbox = [\n      state.boxSelectStartLocation,\n      mouseEventPoint(e.originalEvent, this.map.getContainer())\n    ];\n    const featuresInBox = this.featuresAt(null, bbox, 'click');\n    const idsToSelect = this.getUniqueIds(featuresInBox)\n      .filter(id => !this.isSelected(id));\n\n    if (idsToSelect.length) {\n      this.select(idsToSelect);\n      idsToSelect.forEach(id => this.doRender(id));\n      this.updateUIClasses({ mouse: Constants.cursors.MOVE });\n    }\n  }\n  this.stopExtendedInteractions(state);\n};\n\nSimpleSelect.toDisplayFeatures = function(state, geojson, display) {\n  geojson.properties.active = (this.isSelected(geojson.properties.id)) ?\n    Constants.activeStates.ACTIVE : Constants.activeStates.INACTIVE;\n  display(geojson);\n  this.fireActionable();\n  if (geojson.properties.active !== Constants.activeStates.ACTIVE ||\n    geojson.geometry.type === Constants.geojsonTypes.POINT) return;\n  createSupplementaryPoints(geojson).forEach(display);\n};\n\nSimpleSelect.onTrash = function() {\n  this.deleteFeature(this.getSelectedIds());\n  this.fireActionable();\n};\n\nSimpleSelect.onCombineFeatures = function() {\n  const selectedFeatures = this.getSelected();\n\n  if (selectedFeatures.length === 0 || selectedFeatures.length < 2) return;\n\n  const coordinates = [], featuresCombined = [];\n  const featureType = selectedFeatures[0].type.replace('Multi', '');\n\n  for (let i = 0; i < selectedFeatures.length; i++) {\n    const feature = selectedFeatures[i];\n\n    if (feature.type.replace('Multi', '') !== featureType) {\n      return;\n    }\n    if (feature.type.includes('Multi')) {\n      feature.getCoordinates().forEach((subcoords) => {\n        coordinates.push(subcoords);\n      });\n    } else {\n      coordinates.push(feature.getCoordinates());\n    }\n\n    featuresCombined.push(feature.toGeoJSON());\n  }\n\n  if (featuresCombined.length > 1) {\n    const multiFeature = this.newFeature({\n      type: Constants.geojsonTypes.FEATURE,\n      properties: featuresCombined[0].properties,\n      geometry: {\n        type: `Multi${featureType}`,\n        coordinates\n      }\n    });\n\n    this.addFeature(multiFeature);\n    this.deleteFeature(this.getSelectedIds(), { silent: true });\n    this.setSelected([multiFeature.id]);\n\n    this.fire(Constants.events.COMBINE_FEATURES, {\n      createdFeatures: [multiFeature.toGeoJSON()],\n      deletedFeatures: featuresCombined\n    });\n  }\n  this.fireActionable();\n};\n\nSimpleSelect.onUncombineFeatures = function() {\n  const selectedFeatures = this.getSelected();\n  if (selectedFeatures.length === 0) return;\n\n  const createdFeatures = [];\n  const featuresUncombined = [];\n\n  for (let i = 0; i < selectedFeatures.length; i++) {\n    const feature = selectedFeatures[i];\n\n    if (this.isInstanceOf('MultiFeature', feature)) {\n      feature.getFeatures().forEach((subFeature) => {\n        this.addFeature(subFeature);\n        subFeature.properties = feature.properties;\n        createdFeatures.push(subFeature.toGeoJSON());\n        this.select([subFeature.id]);\n      });\n      this.deleteFeature(feature.id, { silent: true });\n      featuresUncombined.push(feature.toGeoJSON());\n    }\n  }\n\n  if (createdFeatures.length > 1) {\n    this.fire(Constants.events.UNCOMBINE_FEATURES, {\n      createdFeatures,\n      deletedFeatures: featuresUncombined\n    });\n  }\n  this.fireActionable();\n};\n\nexport default SimpleSelect;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}